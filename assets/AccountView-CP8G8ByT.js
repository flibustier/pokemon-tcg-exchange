import{d as A,c as S,a,o as t,n as H,b as f,e,f as b,t as w,_ as V,u as Q,g as j,r as I,w as te,h as ae,i as ce,j as ne,k as ge,l as T,m as C,p,F as x,q as F,s as J,v as L,x as O,y as ve,z as me,A as pe,B as X,C as fe,D as W,E as _e,G as he,H as ye,I as be,J as ee,K as ke,L as we,M as $e,N as oe,O as Ce,P as Ie,Q as Se,R as le,S as re}from"./app-B_HFdnUl.js";import{C as Y}from"./CenteredLayout-Buf8Zq0f.js";import{C as xe,_ as Ve,a as q,P as Be,b as Re}from"./CardsGrid-BuhJQ3Rq.js";import{P as K}from"./PlainButton-ClVhVGlL.js";const ie="/images/icons/exchange.svg",Ae=["src"],Ue={key:0};const De=A({__name:"UserBadge",props:{icon:{},pseudo:{},language:{},friendID:{},withoutBorder:{type:Boolean}},setup(k){const m=S(()=>k.friendID.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"));return(d,u)=>(t(),a("div",{class:H(["user-badge",{"with-border":!d.withoutBorder}])},[d.icon&&d.icon!=="000"?(t(),a("img",{key:0,src:`/images/avatars/${d.icon}.png`,height:"40px",alt:""},null,8,Ae)):f("",!0),e("div",null,[d.pseudo?(t(),a("div",Ue,[b(w(d.pseudo)+" ",1),(d.language,f("",!0))])):f("",!0),e("div",null,"ID "+w(m.value),1)])],2))}}),ue=V(De,[["__scopeId","data-v-eb7da61a"]]),Me={key:1,class:"messenger"},Pe={class:"discussion-list"},Te=["onClick"],Fe=["src"],Le={key:1,class:"avatar"},Ge={class:"content"},ze={key:0,class:"name"},He={key:0},Ne={key:1,class:"name"},qe={class:"last-message"},Ee={key:0},Oe={class:"time"},je={class:"chat-header"},We={key:0,class:"actions show-mobile"},Ye={viewBox:"6 6 24 24",fill:"currentColor",width:"20",height:"20","aria-hidden":"true",style:{"--color":"var(--primary-color)"},overflow:"visible"},Ke={class:"actions"},Je={class:"chat-messages"},Qe={class:"chat-input"},Xe=["disabled"],Ze=A({__name:"MessagesView",setup(k){const m=Q(),d=j(),u=S(()=>m.params.id),l=I([]),n=I([]),g=I(""),y=I(!1),_=S(()=>l.value.find(r=>r.friend_id===u.value)),B=r=>{const c=new Date,s=new Date(r+" UTC"),i=c.getTime()-s.getTime(),h=Math.floor(i/(1e3*3600*24));return h===0?s.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):h===1?"Yesterday":h<7?s.toLocaleDateString(void 0,{weekday:"long"}):c.getFullYear()===s.getFullYear()?s.toLocaleDateString(void 0,{day:"2-digit",month:"long"}):s.toLocaleDateString(void 0,{day:"2-digit",month:"long",year:"numeric"})},U=r=>{y.value=!1,d.push({name:"message",params:{id:r}})},P=()=>{d.push({name:"proposals",query:{id:u.value}})},D=async()=>{if(g.value.length<1)return;const r=await me(u.value,g.value);r==="created"?(g.value="",await $()):n.value.push({from:"error",to:u.value,message:r,sent:new Date().toISOString(),read:null})},$=async()=>{u.value&&(n.value=(await pe(u.value)).reverse(),n.value.length===0&&!X().has_beta_access&&d.push({name:"beta"}),fe(()=>{const r=document.querySelector(".chat-messages");r&&(r.scrollTop=r.scrollHeight)}))};te(u,$);let o;return ae(async()=>{l.value=await ce(),!u.value&&l.value.length>0&&U(l.value[0].friend_id),$(),o=setInterval($,10*1e3)}),ne(()=>{clearInterval(o)}),(r,c)=>{var i,h,R;const s=ge("router-link");return!u.value&&l.value.length===0?(t(),T(Y,{key:0},{default:C(()=>[e("h2",null,[c[3]||(c[3]=b(" You don’t have any conversation yet. ",-1)),c[4]||(c[4]=e("br",null,null,-1)),c[5]||(c[5]=b(" Please use the ",-1)),p(s,{to:"/account/proposals"},{default:C(()=>c[2]||(c[2]=[b("proposals",-1)])),_:1,__:[2]}),c[6]||(c[6]=b(" menu to start a new one. ",-1))])]),_:1})):(t(),a("div",Me,[l.value.length>0?(t(),a("div",{key:0,class:H(["discussions",{"hidden-mobile":!y.value}])},[f("",!0),e("ul",Pe,[(t(!0),a(x,null,F(l.value,v=>(t(),a("li",{key:v.friend_id,class:H(["discussion-item",{active:v.friend_id===u.value}]),onClick:M=>U(v.friend_id)},[v.avatar!==""?(t(),a("img",{key:0,src:`/images/avatars/${v.avatar}.png`,class:"avatar",height:"40px",alt:""},null,8,Fe)):(t(),a("div",Le,w(v.friend_id.slice(-4)),1)),e("div",Ge,[v.pseudo!==""?(t(),a("div",ze,[b(w(v.pseudo)+" ",1),v.language!==""?(t(),a("span",He,"("+w(v.language)+")",1)):f("",!0)])):(t(),a("div",Ne,w(v.friend_id),1)),e("div",qe,[b(w(v.last_message)+" ",1),v.last_message.length===25?(t(),a("span",Ee,"…")):f("",!0)]),e("div",Oe,w(B(v.last_message_date)),1)])],10,Te))),128))])],2)):f("",!0),e("div",{class:H(["chat",{"hidden-mobile":y.value}])},[e("div",je,[l.value.length>0?(t(),a("div",We,[e("button",{title:"List of discussions",onClick:c[0]||(c[0]=v=>y.value=!0)},[(t(),a("svg",Ye,c[8]||(c[8]=[e("path",{d:"M17.634 11.384a1.25 1.25 0 0 0-1.768-1.768l-7.5 7.5a1.25 1.25 0 0 0 0 1.768l7.5 7.5a1.25 1.25 0 0 0 1.768-1.768l-4.94-4.94a.25.25 0 0 1 .177-.426H26.75a1.25 1.25 0 1 0 0-2.5H12.871a.25.25 0 0 1-.177-.427l4.94-4.94z"},null,-1)])))])])):f("",!0),p(ue,{icon:((i=_.value)==null?void 0:i.avatar)||J(m).query.i,pseudo:((h=_.value)==null?void 0:h.pseudo)||J(m).query.p,friendID:((R=_.value)==null?void 0:R.friend_id)||u.value||"","without-border":""},null,8,["icon","pseudo","friendID"]),e("div",Ke,[e("button",{title:"Check common proposals",onClick:P},c[9]||(c[9]=[e("img",{src:ie,alt:"",height:"28"},null,-1)])),f("",!0)])]),e("div",Je,[f("",!0),f("",!0),(t(!0),a(x,null,F(n.value,(v,M)=>(t(),a("div",{key:M,class:H(["message",{"message-sent":["me","error"].includes(v.from),"message-error":v.from==="error"}])},[e("p",null,w(v.message),1)],2))),128))]),e("div",Qe,[L(e("input",{type:"text",placeholder:"Write a message...","onUpdate:modelValue":c[1]||(c[1]=v=>g.value=v),onKeypress:ve(D,["enter"])},null,544),[[O,g.value]]),e("button",{class:"send",onClick:D,disabled:g.value.length<1},c[12]||(c[12]=[e("svg",{height:"20px",viewBox:"0 0 24 24",width:"20px"},[e("title",null,"Press enter to send"),e("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fill:"var(--active-color)"})],-1)]),8,Xe)])],2)]))}}}),es=V(Ze,[["__scopeId","data-v-f2cd09f0"]]),de="/images/icons/message.svg",se=k=>Array.from(new Set(k.filter(m=>m!=null&&m!==""))),ss={key:0},ts={style:{"margin-bottom":"2rem"}},as={class:"list"},ns={class:"cards"},os=["src","alt"],ls={class:"cards"},rs=["src","alt"],is={class:"card-count"},us={class:"tile-footer"},ds={key:0},cs={class:"token-count"},gs=["onClick"],vs={key:3},ms=A({__name:"ProposalsView",setup(k){const m=Q(),d=j(),u=I(),l=I(!0),n=I([]),g=W({raritySelection:[],languageSelection:[],pseudonymSelection:[]}),y=S(()=>n.value.filter(s=>m.query.id?s.friend_id===m.query.id:!0)),_=S(()=>y.value.map(s=>s.card1)),B=S(()=>se(y.value.map(s=>s.language))),U=S(()=>se(y.value.map(s=>s.pseudo))),P=S(()=>y.value.reduce((s,i)=>{const h=i.card1.rarityCode,{friend_id:R,icon:v,pseudo:M,language:Z}=i;if(g.raritySelection.length&&!g.raritySelection.includes(h)||g.languageSelection.length&&!g.languageSelection.includes(Z||"")||g.pseudonymSelection.length&&!g.pseudonymSelection.includes(M||""))return s;const N=s.find(G=>G.rarity===h&&G.friendID===R);return N?(N.wantedCards.every(G=>G.id!==i.card1.id)&&N.wantedCards.push(i.card1),N.givenCards.every(G=>G.id!==i.card2.id)&&N.givenCards.push(i.card2)):s.push({rarity:h,friendID:R,icon:v,pseudo:M,language:Z,wantedCards:[i.card1],givenCards:[i.card2]}),s},[])),D=s=>ye.value[s]||0,$=s=>{const[i,h]=s.split("-");return{id:s,...be.find(R=>R.set===i&&R.number===parseInt(h))}},o=s=>{switch(s){case"R":return 120;case"RR":return 500;case"AR":return 400}return 0},r=s=>{d.push({name:"message",params:{id:s.friendID},query:{i:s.icon,p:s.pseudo}})},c=()=>{window.location.reload()};return ae(async()=>{l.value=!0;try{const s=await _e();n.value=s.map(i=>({...i,card1:$(i.card_wanted),card2:$(i.card_to_give)}))}catch(s){u.value=s}l.value=!1}),(s,i)=>(t(),T(Y,{style:{padding:"2rem 0"}},{default:C(()=>[l.value?(t(),a("h2",ss,"Loading your proposals…")):u.value?(t(),a(x,{key:1},[e("h2",ts,w(u.value),1),p(K,{onClick:c},{default:C(()=>i[1]||(i[1]=[b("Refresh",-1)])),_:1,__:[1]})],64)):y.value.length>0?(t(),a(x,{key:2},[i[5]||(i[5]=e("h2",null,"You’ve got a match!",-1)),p(xe,{modelValue:g,"onUpdate:modelValue":i[0]||(i[0]=h=>g=h),cards:_.value,languages:B.value,pseudonyms:U.value},null,8,["modelValue","cards","languages","pseudonyms"]),e("div",as,[(t(!0),a(x,null,F(P.value,(h,R)=>(t(),a("div",{class:"exchange-tile",key:R},[p(ue,he({class:"tile-title"},{ref_for:!0},h),null,16),e("div",ns,[(t(!0),a(x,null,F(h.wantedCards,(v,M)=>(t(),a("div",{class:"card-container",key:M},[e("img",{src:`/images/cards/thumbnails/${v.imageName}`,alt:v.label.eng,class:"card-image"},null,8,os)]))),128))]),i[4]||(i[4]=e("div",{class:"exchange-icon"},null,-1)),e("div",ls,[(t(!0),a(x,null,F(h.givenCards,(v,M)=>(t(),a("div",{class:"card-container",key:M},[e("img",{src:`/images/cards/thumbnails/${v.imageName}`,alt:v.label.eng,class:"card-image"},null,8,rs),e("span",is,w(D(v.id)),1)]))),128))]),e("div",us,[h.language?(t(),a("div",ds,w(h.language),1)):f("",!0),e("div",null,[i[2]||(i[2]=e("img",{src:Ve,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",cs,w(o(h.rarity)),1)]),e("div",{class:"clickable",onClick:v=>r(h)},i[3]||(i[3]=[e("img",{src:de,height:"20",alt:"Message"},null,-1)]),8,gs)])]))),128))])],64)):(t(),a("h2",vs,i[6]||(i[6]=[b(" No matching proposals for now :( ",-1),e("br",null,null,-1),b(" Please come back later! ",-1)])))]),_:1}))}}),ps=V(ms,[["__scopeId","data-v-b62153ad"]]),fs={key:0,class:"prices"},_s={class:"rarity"},hs=["src","alt","title"],ys=A({__name:"PacksInformations",setup(k){const m=u=>u.reduce((l,n)=>{for(const g of n.packs||[])l[g||""]=(l[g||""]||0)+n.count;return l},{}),d=S(()=>Object.entries(m(ee.value)).sort((u,l)=>l[1]-u[1]));return(u,l)=>J(ee).length>0?(t(),a("div",fs,[l[0]||(l[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(t(!0),a(x,null,F(d.value,([n,g])=>(t(),a("div",{class:"price",key:n},[e("div",_s,[e("img",{src:`/images/packs/${n}.webp`,alt:n,height:"100px",title:n+" booster pack"},null,8,hs)]),e("span",null,w(g)+" cards wanted inside",1)]))),128))])):f("",!0)}}),bs=V(ys,[["__scopeId","data-v-f29dc244"]]),ks={class:"toggle-container"},ws={class:"switch-label"},$s=["disabled"],Cs={class:"switch-text"},Is=A({__name:"ToggleSwitch",props:ke({disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(k){const m=we(k,"modelValue");return(d,u)=>(t(),a("div",ks,[e("label",ws,[L(e("input",{type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=l=>m.value=l),disabled:k.disabled,class:"switch-input"},null,8,$s),[[$e,m.value]]),u[1]||(u[1]=e("span",{class:"switch-slider"},null,-1)),e("span",Cs,[oe(d.$slots,"default",{},void 0)])])]))}}),z=V(Is,[["__scopeId","data-v-c0313374"]]),Ss={class:"form-group"},xs=["src"],Vs={key:0,class:"icon-list"},Bs=["onClick"],Rs=["src"],As={class:"form-group"},Us={class:"form-group"},Ds={class:"form-group"},Ms={class:"form-group"},Ps=["value"],Ts={class:"form-group"},Fs=43,Ls=A({__name:"SettingsForm",setup(k){const m=["ENG","SPA","FRA","GER","ITA","POR","JPN","KOR","CHT"],d=j(),{rarity_rules:u,...l}=X(),n=W({pseudo:"",icon:"000",language:"",accept_notifications:!0,has_beta_access:!1,...l,friend_id:Ce()}),g=I(!1),y=I(!1),_=W({C:!0,U:!0,R:!0,RR:!0,AR:!0,...(u||[]).reduce(($,o)=>({...$,[o.rarity]:o.enabled===1}),{})});te(()=>[n,_],()=>{y.value=!1},{deep:!0});const B=S(()=>`/images/avatars/${n.icon||"000"}.png`),U=$=>{n.icon=String($).padStart(3,"0"),g.value=!1},P=()=>{d.push({name:"beta"})},D=async()=>{le({...n,rarity_rules:Object.entries(_).map(([$,o])=>({rarity:$,enabled:o?1:0}))}),y.value=await re()||!1};return($,o)=>(t(),a("form",{class:"friend-form",onSubmit:Ie(D,["prevent"])},[o[16]||(o[16]=e("h2",null,"Settings",-1)),e("div",Ss,[o[9]||(o[9]=e("label",{for:"icon",class:"form-label label-center"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:o[0]||(o[0]=r=>g.value=!g.value)},[e("img",{src:B.value,alt:"Selected Icon",id:"icon"},null,8,xs)]),g.value?(t(),a("div",Vs,[(t(),a(x,null,F(Fs,r=>e("div",{key:r,class:"icon-item",onClick:c=>U(r)},[e("img",{src:`/images/avatars/${String(r).padStart(3,"0")}.png`,alt:"Icon"},null,8,Rs)],8,Bs)),64))])):f("",!0)]),e("div",As,[o[10]||(o[10]=e("label",{for:"friendId",class:"form-label"},"Friend ID",-1)),L(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>n.friend_id=r),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16",disabled:!0},null,512),[[O,n.friend_id]])]),e("div",Us,[o[11]||(o[11]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),L(e("input",{"onUpdate:modelValue":o[2]||(o[2]=r=>n.pseudo=r),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[O,n.pseudo]])]),e("div",Ds,[o[12]||(o[12]=e("label",{class:"form-label"},"Accept exchange of rarity:",-1)),p(z,{modelValue:_.C,"onUpdate:modelValue":o[3]||(o[3]=r=>_.C=r)},{default:C(()=>[p(q,{rarity:"C"})]),_:1},8,["modelValue"]),p(z,{modelValue:_.U,"onUpdate:modelValue":o[4]||(o[4]=r=>_.U=r)},{default:C(()=>[p(q,{rarity:"U"})]),_:1},8,["modelValue"]),p(z,{modelValue:_.R,"onUpdate:modelValue":o[5]||(o[5]=r=>_.R=r)},{default:C(()=>[p(q,{rarity:"R"})]),_:1},8,["modelValue"]),p(z,{modelValue:_.RR,"onUpdate:modelValue":o[6]||(o[6]=r=>_.RR=r)},{default:C(()=>[p(q,{rarity:"RR"})]),_:1},8,["modelValue"]),p(z,{modelValue:_.AR,"onUpdate:modelValue":o[7]||(o[7]=r=>_.AR=r)},{default:C(()=>[p(q,{rarity:"AR"})]),_:1},8,["modelValue"])]),e("div",Ms,[o[14]||(o[14]=e("label",{for:"language-input",class:"form-label"},"Your card’s language",-1)),L(e("select",{id:"language-input","onUpdate:modelValue":o[8]||(o[8]=r=>n.language=r),class:"language-input"},[o[13]||(o[13]=e("option",{value:""},"Please select",-1)),(t(),a(x,null,F(m,r=>e("option",{key:r,value:r},w(r),9,Ps)),64))],512),[[Se,n.language]])]),e("div",Ts,[p(z,{"model-value":n.has_beta_access,disabled:n.has_beta_access,"onUpdate:modelValue":P},{default:C(()=>o[15]||(o[15]=[b(" Access beta features (messages, …) ",-1)])),_:1,__:[15]},8,["model-value","disabled"])]),p(K,{type:"submit",role:"button",disabled:y.value},{default:C(()=>[b(w(y.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),Gs=V(Ls,[["__scopeId","data-v-12e03221"]]),zs=["disabled"],Hs={class:"icon"},Ns={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},qs={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Es={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Os={key:3,src:ie,width:"32",height:"32"},js={key:4,src:de,width:"38",height:"38"},Ws={class:"label"},Ys=A({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean},disabled:{type:Boolean}},setup(k){const m=j(),d=k,u=()=>m.push({name:d.label.toLowerCase()});return(l,n)=>(t(),a("button",{class:H(["portfolio-btn",{active:l.active}]),disabled:l.disabled??!1,onClick:u},[e("span",Hs,[l.icon==="portfolio"?(t(),a("svg",Ns,n[0]||(n[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):l.icon==="heart"?(t(),a("svg",qs,n[1]||(n[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):l.icon==="gear"?(t(),a("svg",Es,n[2]||(n[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):f("",!0),l.icon==="exchange"?(t(),a("img",Os)):f("",!0),l.icon==="message"?(t(),a("img",js)):f("",!0)]),e("span",Ws,w(l.label),1)],10,zs))}}),E=V(Ys,[["__scopeId","data-v-c224a86c"]]),Ks="/images/icons/grid.svg",Js={},Qs={class:"hr-or"};function Xs(k,m){return t(),a("div",Qs,[oe(k.$slots,"default",{},()=>[m[0]||(m[0]=b("OR",-1))])])}const Zs=V(Js,[["render",Xs],["__scopeId","data-v-e7568407"]]),et={key:0,class:"column-center"},st={class:"form-group"},tt={key:0,class:"form-error"},at={class:"form-group"},nt={key:0,class:"form-error"},ot=A({__name:"GitHubStargazer",emits:["success"],setup(k,{emit:m}){const d=m,u=I(!1),l=I(!1),n=I(""),g=I(""),y=I([]),_=I(0),B=W({accessCode:!1,ghUsername:!1}),U=async()=>(await(await fetch("https://api.github.com/repos/flibustier/pokemon-tcg-exchange/stargazers")).json()).map(i=>i.login),P=S(()=>g.value.toUpperCase()==="FRIEND"),D=async()=>{if(y.value.includes(n.value)||P.value){console.log("ACCESS GRANTED"),d("success",P.value?"":n.value);return}if(n.value.length>0&&!u.value&&_.value>0){l.value=!0;return}B.ghUsername=n.value.length>0,B.accessCode=g.value.length>0},$=()=>{l.value=!1},o=async()=>{const c=await U();c.length!==y.value.length&&(n.value=c.find(s=>!y.value.includes(s))||"",u.value=!0,y.value=c,clearInterval(_.value),D())},r=async()=>{y.value=await U(),_.value=setInterval(o,5e3)};return ne(()=>{clearInterval(_.value)}),(c,s)=>l.value?(t(),a("div",et,[s[3]||(s[3]=e("img",{src:Ks,alt:"",height:"40"},null,-1)),s[4]||(s[4]=e("p",null,"Checking GitHub Stargazers, please wait… (this could take up to one minute)",-1)),p(K,{type:"button",role:"button",onClick:$},{default:C(()=>s[2]||(s[2]=[b(" Cancel ",-1)])),_:1,__:[2]})])):(t(),a(x,{key:1},[s[10]||(s[10]=e("p",null," In order to access to the messaging feature and others beta features, you need to star the repository on GitHub : ",-1)),e("span",{class:"github-btn-large",onClick:r},s[5]||(s[5]=[e("a",{class:"gh-btn",href:"https://github.com/flibustier/pokemon-tcg-exchange",rel:"noopener noreferrer",target:"_blank","aria-label":"Star pokemon-tcg-exchange on GitHub"},[e("span",{class:"gh-ico","aria-hidden":"true"}),e("span",{class:"gh-text"},"Star")],-1)])),e("div",st,[s[7]||(s[7]=e("label",{for:"username",class:"form-label"},"Enter your GitHub username :",-1)),L(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i),type:"text",id:"username",class:"form-input"},null,512),[[O,n.value]]),B.ghUsername&&n.value.length>0?(t(),a("p",tt,s[6]||(s[6]=[b(" This username doesn’t seems to be a new stargazer, please retry in a few seconds or contact us at ",-1),e("a",{href:"mailto:help@pokemon-tcg.exchange?subject=Beta%20Access"},"help@pokemon-tcg.exchange",-1)]))):f("",!0)]),p(Zs),s[11]||(s[11]=e("p",null,[b(" If you got a code given by our team, you can enter it here ("),e("b",null,"you don’t need it if you have a GitHub account"),b(") : ")],-1)),e("div",at,[s[8]||(s[8]=e("label",{for:"accessCode",class:"form-label"},"Beta Access code",-1)),L(e("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>g.value=i),type:"text",id:"accessCode",class:"form-input",autocapitalize:"characters"},null,512),[[O,g.value]]),B.accessCode?(t(),a("p",nt," This code is not recognized. Please try again. ")):f("",!0)]),p(K,{type:"submit",role:"button",disabled:n.value.length<1&&g.value.length<3,onClick:D},{default:C(()=>s[9]||(s[9]=[b(" Submit ",-1)])),_:1,__:[9]},8,["disabled"])],64))}}),lt=V(ot,[["__scopeId","data-v-d8e86ca2"]]),rt={class:"form"},it=A({__name:"BetaAccessForm",setup(k){const m=j(),d=async u=>{le({...X(),has_beta_access:!0,github_username:u}),await re(),m.back()};return(u,l)=>(t(),a("div",rt,[l[0]||(l[0]=e("h2",null,"Access to Beta features",-1)),p(lt,{onSuccess:d})]))}}),ut=V(it,[["__scopeId","data-v-a0aaca68"]]),dt={class:"aside"},ct={class:"content"},gt={class:"row-xl"},vt=A({__name:"AccountView",setup(k){const m=Q(),d=S(()=>m.name),u=S(()=>["wishlist","offers"].includes(d.value??""));return(l,n)=>(t(),a("main",null,[e("div",dt,[e("nav",null,[p(E,{label:"Wishlist",icon:"heart",active:d.value==="wishlist"},null,8,["active"]),p(E,{label:"Offers",icon:"portfolio",active:d.value==="offers"},null,8,["active"]),p(E,{label:"Proposals",icon:"exchange",active:d.value==="proposals"},null,8,["active"]),p(E,{label:"Messages",icon:"message",active:d.value.startsWith("message")},null,8,["active"]),p(E,{label:"Account",icon:"gear",active:d.value==="account"},null,8,["active"])]),u.value?(t(),T(Be,{key:0,id:"prices",showGiving:d.value==="offers"},null,8,["showGiving"])):f("",!0)]),e("div",ct,[u.value?(t(),T(Re,{key:0,step:d.value==="wishlist"?1:2},null,8,["step"])):f("",!0),d.value==="proposals"?(t(),T(ps,{key:1})):f("",!0),d.value==="account"?(t(),T(Y,{key:2},{default:C(()=>[e("div",gt,[p(Gs),p(bs)])]),_:1})):f("",!0),d.value==="beta"?(t(),T(Y,{key:3},{default:C(()=>[p(ut)]),_:1})):f("",!0),d.value.startsWith("message")?(t(),T(es,{key:4})):f("",!0)])]))}}),ht=V(vt,[["__scopeId","data-v-dde29f92"]]);export{ht as default};
