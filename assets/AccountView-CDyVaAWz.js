import{d as $,c as r,u as F,n as M,a as e,f as p,t as g,o as t,_ as C,g as R,h as N,i as G,r as I,w as T,j as b,k as U,b as h,l as S,v as V,F as m,m as w,P as j,p as P,e as B,q as L,x as z,y as H,z as W,A as y,B as q,C as E,D as O,E as A,G as J,H as Y,I as K,J as Q}from"./index-Bo-s_S7A.js";import{C as D}from"./CenteredLayout-czn5Z1cO.js";const X="/images/icons/exchange.svg",Z={class:"icon"},ee={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},se={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},te={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ae={key:3,src:X,width:"32",height:"32"},ne={class:"label"},oe=$({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean}},setup(k){const o=F(),i=k,c=()=>o.push({name:i.label.toLowerCase()});return(n,a)=>(t(),r("button",{class:M(["portfolio-btn",{active:n.active}]),onClick:c},[e("span",Z,[n.icon==="portfolio"?(t(),r("svg",ee,a[0]||(a[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):n.icon==="heart"?(t(),r("svg",se,a[1]||(a[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):n.icon==="gear"?(t(),r("svg",te,a[2]||(a[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):p("",!0),n.icon==="exchange"?(t(),r("img",ae)):p("",!0)]),e("span",ne,g(n.label),1)],2))}}),x=C(oe,[["__scopeId","data-v-b8091c95"]]),ie={class:"form-group"},re={class:"form-group"},le={class:"form-group"},de=["src"],ce={key:0,class:"icon-list"},ue=["onClick"],ve=["src"],_e=$({__name:"SettingsForm",setup(k){const o=R({pseudo:"",icon:"000",...G(),friend_id:N()}),i=I(!1),c=I(!1);T(()=>[o.friend_id,o.pseudo,o.icon],()=>{c.value=!1});const n=b(()=>`/images/avatars/${o.icon}.png`),a=l=>{o.icon=String(l).padStart(3,"0"),i.value=!1},_=async()=>{L(o),c.value=await z()||!1};return(l,s)=>(t(),r("form",{class:"friend-form",onSubmit:U(_,["prevent"])},[e("div",ie,[s[3]||(s[3]=e("label",{for:"friendId",class:"form-label"},'Friend ID (16 digits without "-")',-1)),S(e("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>o.friend_id=d),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16"},null,512),[[V,o.friend_id]])]),e("div",re,[s[4]||(s[4]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),S(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>o.pseudo=d),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[V,o.pseudo]])]),e("div",le,[s[5]||(s[5]=e("label",{for:"icon",class:"form-label"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:s[2]||(s[2]=d=>i.value=!i.value)},[e("img",{src:n.value,alt:"Selected Icon",id:"icon"},null,8,de)]),i.value?(t(),r("div",ce,[(t(),r(m,null,w(35,d=>e("div",{key:d,class:"icon-item",onClick:f=>a(d)},[e("img",{src:`/images/avatars/${String(d).padStart(3,"0")}.png`,alt:"Icon"},null,8,ve)],8,ue)),64))])):p("",!0)]),h(j,{type:"submit",role:"button",disabled:c.value},{default:P(()=>[B(g(c.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),fe=C(_e,[["__scopeId","data-v-cd3c2205"]]),pe={class:"list"},he={class:"tile-title"},me={class:"cards"},ge=["src","alt"],ke={class:"cards"},ye=["src","alt"],we={class:"card-count"},be={class:"tile-footer"},$e={class:"token-count"},Ce={key:1},xe=$({__name:"ProposalsView",setup(k){const o=I([]),i=b(()=>o.value.reduce((l,s)=>{const d=s.card1.rarityCode,f=s.friend_id,u=l.find(v=>v.rarity===d&&v.friendID===f);return u?(u.wantedCards.every(v=>v.id!==s.card1.id)&&u.wantedCards.push(s.card1),u.givenCards.every(v=>v.id!==s.card2.id)&&u.givenCards.push(s.card2)):l.push({rarity:d,friendID:f,wantedCards:[s.card1],givenCards:[s.card2]}),l},[])),c=l=>q.value[l]||0,n=l=>{const[s,d]=l.split("-");return{id:l,...O.find(f=>f.set===s&&f.number===parseInt(d))}},a=l=>l.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"),_=l=>{switch(l){case"R":return 120;case"RR":return 500;case"AR":return 400}return 0};return H(async()=>{const l=await W();o.value=l.map(s=>({...s,card1:n(s.card_wanted),card2:n(s.card_to_give)}))}),(l,s)=>(t(),y(D,{style:{padding:"2rem 0"}},{default:P(()=>[o.value.length>0?(t(),r(m,{key:0},[s[2]||(s[2]=e("h2",null,"You’ve got a match!",-1)),e("div",pe,[(t(!0),r(m,null,w(i.value,(d,f)=>(t(),r("div",{class:"exchange-tile",key:f},[e("span",he,"Friend ID : "+g(a(d.friendID)),1),e("div",me,[(t(!0),r(m,null,w(d.wantedCards,(u,v)=>(t(),r("div",{class:"card-container",key:v},[e("img",{src:`/images/cards/thumbnails/${u.imageName}`,alt:u.label.eng,class:"card-image"},null,8,ge)]))),128))]),s[1]||(s[1]=e("div",{class:"exchange-icon"},null,-1)),e("div",ke,[(t(!0),r(m,null,w(d.givenCards,(u,v)=>(t(),r("div",{class:"card-container",key:v},[e("img",{src:`/images/cards/thumbnails/${u.imageName}`,alt:u.label.eng,class:"card-image"},null,8,ye),e("span",we,g(c(u.id)),1)]))),128))]),e("div",be,[s[0]||(s[0]=e("img",{src:E,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",$e,g(_(d.rarity)),1)])]))),128))])],64)):(t(),r("h2",Ce,s[3]||(s[3]=[B(" No matching proposals for now :( "),e("br",null,null,-1),B(" Please come back later! ")])))]),_:1}))}}),Ie=C(xe,[["__scopeId","data-v-f139da15"]]),Be={key:0,class:"prices"},Pe={class:"rarity"},Se=["src","alt","title"],Ve=$({__name:"PacksInformations",setup(k){const o=c=>c.reduce((n,a)=>{console.log(a);for(const _ of a.packs||[])n[_||""]=(n[_||""]||0)+a.count;return n},{}),i=b(()=>Object.entries(o(A.value)).sort((c,n)=>n[1]-c[1]));return(c,n)=>J(A).length>0?(t(),r("div",Be,[n[0]||(n[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(t(!0),r(m,null,w(i.value,([a,_])=>(t(),r("div",{class:"price",key:a},[e("div",Pe,[e("img",{src:`/images/packs/${a}.webp`,alt:a,height:"100px",title:a+" booster pack"},null,8,Se)]),e("span",null,g(_)+" cards wanted inside",1)]))),128))])):p("",!0)}}),Ae=C(Ve,[["__scopeId","data-v-2313b362"]]),De={class:"aside"},Fe={class:"content"},Me=$({__name:"AccountView",setup(k){const o=Y(),i=b(()=>o.name),c=b(()=>["wishlist","offers"].includes(i.value??""));return(n,a)=>(t(),r("main",null,[e("div",De,[e("nav",null,[h(x,{label:"Wishlist",icon:"heart",active:i.value==="wishlist"},null,8,["active"]),h(x,{label:"Offers",icon:"portfolio",active:i.value==="offers"},null,8,["active"]),h(x,{label:"Proposals",icon:"exchange",active:i.value==="proposals"},null,8,["active"]),h(x,{label:"Account",icon:"gear",active:i.value==="account"},null,8,["active"])]),c.value?(t(),y(K,{key:0,id:"prices",showGiving:i.value==="offers"},null,8,["showGiving"])):p("",!0)]),e("div",Fe,[c.value?(t(),y(Q,{key:0,step:i.value==="wishlist"?1:2},null,8,["step"])):p("",!0),i.value==="proposals"?(t(),y(Ie,{key:1})):p("",!0),i.value==="account"?(t(),y(D,{key:2,style:{gap:"2rem"}},{default:P(()=>[a[0]||(a[0]=e("h2",null,"Settings",-1)),h(fe),h(Ae)]),_:1,__:[0]})):p("",!0)])]))}}),Ge=C(Me,[["__scopeId","data-v-a023504d"]]);export{Ge as default};
