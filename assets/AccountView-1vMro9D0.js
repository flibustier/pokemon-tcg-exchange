import{d as M,c as n,n as K,a as h,b as e,e as w,t as k,f as x,o as a,_ as V,u as ve,w as ge,r as Z,m as fe,g as D,h as p,F as R,i as L,j as B,k as S,l as Ce,p as i,q as re,s as ae,v as ee,x as pe,y as Q,z as _e,A as ue,B as N,C as he,D as te,E as Y,G as H,H as J,I as Se,J as Ie,K as Ve,L as ie,M as xe,N as Re,O as Me,P as ce,Q as oe,R as ye,S as be,T as Ue,U as Ae,V as Be,W as me,X as De,Y as Pe,Z as Te,$ as Le,a0 as ze,a1 as Ee,a2 as Fe,a3 as Ne}from"./app-BSsdP2ft.js";import{_ as ke,r as le,C as He,a as E,P as Ge,b as qe}from"./PricesTable-UK3wFlJY.js";import{C as X}from"./CenteredLayout-CJ25ntsI.js";import{P as se}from"./PlainButton-AuiDBhNH.js";const Oe="/images/icons/exchange.svg",je=["src"],Ke={key:0};const We={style:{display:"flex"}},Ye=["title"],Ze=M({__name:"UserBadge",props:{icon:{},pseudo:{},language:{},friendID:{},withoutBorder:{type:Boolean},lastUpdate:{}},setup(d){const g=x(()=>d.friendID.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4")),v=r=>{navigator.clipboard.writeText(r)};return(r,c)=>(a(),n("div",{class:K(["user-badge",{"with-border":!d.withoutBorder}])},[d.icon&&d.icon!=="000"?(a(),n("img",{key:0,src:`/images/avatars/${d.icon}.png`,height:"40px",alt:""},null,8,je)):h("",!0),e("div",null,[d.pseudo?(a(),n("div",Ke,[w(k(d.pseudo)+" ",1),(d.language,h("",!0))])):h("",!0),e("div",We,[w(" ID "+k(g.value)+" ",1),e("button",{onClick:c[0]||(c[0]=l=>v(d.friendID)),class:"copy-button",title:"Copy ID"},[...c[1]||(c[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)])])]),d.lastUpdate?(a(),n("div",{key:1,class:"time",title:"The last update from this user is "+d.lastUpdate},k(d.lastUpdate),9,Ye)):h("",!0)])],2))}}),we=V(Ze,[["__scopeId","data-v-125c0895"]]),Je="/images/BoosterPoints.png",Xe={class:"modal-header"},Qe={class:"column modal-body"},et={key:0,class:"modal-footer"},tt=M({__name:"BaseModal",props:fe({title:{type:String,default:""}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const g=ve(d,"modelValue"),v=()=>{g.value=!1};return(r,c)=>g.value?(a(),n("div",{key:0,class:"modal",onClick:v},[e("div",{class:"modal-content",onClick:c[0]||(c[0]=ge(()=>{},["stop"]))},[e("div",Xe,[e("h2",null,k(d.title),1),e("button",{class:"close",onClick:v,title:"Close this dialog"})]),e("div",Qe,[Z(r.$slots,"default",{},void 0),r.$slots.footer?(a(),n("div",et,[Z(r.$slots,"footer",{},void 0)])):h("",!0)])])])):h("",!0)}}),st=V(tt,[["__scopeId","data-v-083339a3"]]),at={class:"flex"},ot=["src","alt"],lt={class:"column"},nt=["src","alt"],rt={class:"row",style:{"overflow-x":"scroll"}},it=["src","alt"],dt={class:"row"},ut={class:"row"},ct=M({__name:"CardModal",props:{card:{}},setup(d,{expose:g}){const v=S(!1);return g({showModal:()=>{console.log("showModal"),v.value=!0}}),(c,l)=>(a(),D(st,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=f=>v.value=f),title:d.card.name+` (${d.card.id})`},{default:p(()=>[e("div",at,[e("img",{src:d.card.imagePaths.full,class:"responsive-image",width:"367",height:"512",alt:d.card.name,loading:"lazy"},null,8,ot),e("div",lt,[e("img",{src:d.card.imagePaths.set,alt:d.card.set,class:"responsive-image",width:"256",loading:"lazy"},null,8,nt),e("div",rt,[(a(!0),n(R,null,L(d.card.packs,f=>(a(),n("img",{key:f,src:`/images/packs/${f}.webp`,alt:f,class:"responsive-image",height:"192",width:"120",loading:"lazy"},null,8,it))),128))]),e("div",dt,[l[1]||(l[1]=e("img",{src:ke,width:"28",height:"28",alt:"Shine dust cost"},null,-1)),e("span",null,k(B(le)[d.card.rarity].tradePrice),1)]),e("div",ut,[l[2]||(l[2]=e("img",{src:Je,height:"32",alt:"Booster points cost"},null,-1)),e("span",null,k(B(le)[d.card.rarity].points),1)])])])]),_:1},8,["modelValue","title"]))}}),mt=V(ct,[["__scopeId","data-v-63ac20dd"]]),vt=["src","alt","title"],gt=M({__name:"CardImageAndModal",props:{card:{}},setup(d){const g=Ce("modal");return(v,r)=>(a(),n(R,null,[e("img",{src:d.card.imagePaths.thumbnail,alt:d.card.name,class:"card-thumbnail",width:"135",height:"188",loading:"lazy",title:d.card.id,onClick:r[0]||(r[0]=()=>g.value?.showModal())},null,8,vt),i(mt,{card:d.card,ref_key:"modal",ref:g},null,8,["card"])],64))}}),ne=V(gt,[["__scopeId","data-v-a45ed1e9"]]),ft={key:1,class:"messenger"},pt={class:"discussion-list"},_t=["onClick"],ht=["src"],yt={key:1,class:"avatar"},bt={class:"content"},kt={key:0,class:"name"},wt={key:0,class:"language"},$t={key:1,class:"name"},Ct={class:"last-message"},St={key:0},It={class:"time"},Vt={class:"chat-header"},xt={key:0,class:"actions show-mobile"},Rt={viewBox:"6 6 24 24",fill:"currentColor",width:"20",height:"20","aria-hidden":"true",style:{"--color":"var(--primary-color)"},overflow:"visible"},Mt={class:"actions"},Ut={class:"chat-messages"},At=["title"],Bt={key:0,class:"message-image-container"},Dt={class:"time"},Pt={key:0},Tt={key:1},Lt={class:"chat-input"},zt=["disabled"],Et=M({__name:"MessagesView",setup(d){const g=re(),v=ae(),r=x(()=>Array.isArray(g.params.id)?g.params.id[0]:g.params.id),c=S([]),l=S(""),f=S(!1),$=x(()=>N.value.find(y=>y.friend_id===r.value)),_=async y=>{f.value=!1,await v.push({name:"message",params:{id:y}})},P=async()=>{if(l.value.length<1)return;const y=await Ie(r.value,l.value);y==="created"?(l.value="",await U()):c.value.push({from:"error",to:r.value,message:y,sent:new Date().toISOString(),read:null})},U=async()=>{if(r.value){const y=c.value.length;c.value=(await Ve(r.value)).reverse();const s=c.value.length;c.value.length===0&&!ie().has_beta_access&&v.push({name:"beta"}),$.value?.read===!1&&await ue(),y!==s&&xe(()=>{const b=document.querySelector(".chat-messages");b&&(b.scrollTop=b.scrollHeight)})}};ee(r,U);const I=S([]);ee(r,async()=>{I.value.length>0&&(I.value=[]),r.value&&(await pe(r.value)).forEach(({card_wanted:s,card_to_give:b})=>{const m=Q.find(u=>u.id===s);m&&!I.value.find(u=>u.id===m.id)&&I.value.push(m);const t=Q.find(u=>u.id===b);t&&!I.value.find(u=>u.id===t.id)&&I.value.push(t)})},{immediate:!0});const z=y=>{const s=/([a-zA-Z][0-9][abAB]?\-[0-9]{1,3})/g,b=[];let m;for(;(m=s.exec(y))!==null;){const t=m[1].toUpperCase(),u=Q.find(C=>C.id===t);u&&b.push(u)}return y.split(" ").forEach(t=>{const u=I.value.filter(C=>C.name.toLowerCase()===t.toLowerCase());u.length>0&&b.push(...u)}),b},A=x(()=>c.value.map((y,s)=>{const b=["me","error"].includes(y.from);return{...y,images:z(y.message),formattedSentDate:Y(y.sent),isFromMe:b,formattedReadDate:y.read&&b&&(s===c.value.length-1||c.value[s+1].read===null)?Y(y.read):null}}));let o;return _e(async()=>{await ue(),!r.value&&N.value.length>0&&await _(N.value[0].friend_id),U(),o=setInterval(U,10*1e3),l.value=localStorage.getItem("draft_message")||"",localStorage.removeItem("draft_message")}),he(()=>{l.value.length>0&&localStorage.setItem("draft_message",l.value),clearInterval(o)}),(y,s)=>{const b=te("router-link"),m=te("RouterLink");return!r.value&&B(N).length===0?(a(),D(X,{key:0},{default:p(()=>[e("h2",null,[s[3]||(s[3]=w(" You don’t have any conversation yet. ",-1)),s[4]||(s[4]=e("br",null,null,-1)),s[5]||(s[5]=w(" Please use the ",-1)),i(b,{to:"/account/proposals"},{default:p(()=>[...s[2]||(s[2]=[w("proposals",-1)])]),_:1}),s[6]||(s[6]=w(" menu to start a new one. ",-1))])]),_:1})):(a(),n("div",ft,[B(N).length>0?(a(),n("div",{key:0,class:K(["discussions",{"hidden-mobile":!f.value}])},[h("",!0),e("ul",pt,[(a(!0),n(R,null,L(B(N),t=>(a(),n("li",{key:t.friend_id,class:K(["discussion-item",{active:t.friend_id===r.value,unread:t.read===!1}]),onClick:u=>_(t.friend_id)},[t.avatar&&t.avatar!==""?(a(),n("img",{key:0,src:`/images/avatars/${t.avatar}.png`,class:"avatar",height:"40px",alt:""},null,8,ht)):(a(),n("div",yt,k(t.friend_id.slice(-4)),1)),e("div",bt,[t.pseudo&&t.pseudo!==""?(a(),n("div",kt,[w(k(t.pseudo)+" ",1),t.language!==""?(a(),n("span",wt,"("+k(t.language)+")",1)):h("",!0)])):(a(),n("div",$t,k(t.friend_id),1)),e("div",Ct,[w(k(t.last_message)+" ",1),t.last_message.length===25?(a(),n("span",St,"…")):h("",!0)]),e("div",It,k(B(Y)(t.last_message_date)),1)])],10,_t))),128))])],2)):h("",!0),e("div",{class:K(["chat",{"hidden-mobile":f.value}])},[e("div",Vt,[B(N).length>0?(a(),n("div",xt,[e("button",{title:"List of discussions",onClick:s[0]||(s[0]=t=>f.value=!0)},[(a(),n("svg",Rt,[...s[8]||(s[8]=[e("path",{d:"M17.634 11.384a1.25 1.25 0 0 0-1.768-1.768l-7.5 7.5a1.25 1.25 0 0 0 0 1.768l7.5 7.5a1.25 1.25 0 0 0 1.768-1.768l-4.94-4.94a.25.25 0 0 1 .177-.426H26.75a1.25 1.25 0 1 0 0-2.5H12.871a.25.25 0 0 1-.177-.427l4.94-4.94z"},null,-1)])]))])])):h("",!0),i(we,{icon:$.value?.avatar||B(g).query.i,pseudo:$.value?.pseudo||B(g).query.p,friendID:$.value?.friend_id||r.value||"","without-border":""},null,8,["icon","pseudo","friendID"]),e("div",Mt,[i(m,{to:{name:"proposals",query:{id:r.value}},title:"Check common proposals"},{default:p(()=>[...s[9]||(s[9]=[e("img",{src:Oe,alt:"",height:"28"},null,-1)])]),_:1},8,["to"]),h("",!0)])]),e("div",Ut,[h("",!0),(a(!0),n(R,null,L(A.value,(t,u)=>(a(),n("div",{key:u,class:K(["message",{"message-sent":t.isFromMe,"message-error":t.from==="error"}]),title:"Message sent "+t.formattedSentDate+" and "+(t.read?"read "+B(Y)(t.read):"not read yet")},[t.images.length>0?(a(),n("div",Bt,[(a(!0),n(R,null,L(t.images,(C,G)=>(a(),D(ne,{key:G,card:C},null,8,["card"]))),128))])):h("",!0),e("p",null,k(t.message),1),e("div",Dt,[t.formattedReadDate?(a(),n("span",Pt,"sent ")):h("",!0),w(" "+k(t.formattedSentDate)+" ",1),t.formattedReadDate?(a(),n("span",Tt,"- seen "+k(t.formattedReadDate),1)):h("",!0)])],10,At))),128))]),e("div",Lt,[H(e("input",{type:"text",placeholder:"Write a message...","onUpdate:modelValue":s[1]||(s[1]=t=>l.value=t),onKeypress:Se(P,["enter"])},null,544),[[J,l.value]]),e("button",{class:"send",onClick:P,disabled:l.value.length<1},[...s[11]||(s[11]=[e("svg",{height:"20px",viewBox:"0 0 24 24",width:"20px"},[e("title",null,"Press enter to send"),e("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fill:"var(--active-color)"})],-1)])],8,zt)])],2)]))}}}),Ft=V(Et,[["__scopeId","data-v-2fb8040f"]]),Nt="/images/icons/message.svg",Ht={key:0},Gt={style:{"margin-bottom":"2rem"}},qt={class:"list"},Ot={class:"cards"},jt={class:"cards"},Kt={class:"card-count"},Wt={class:"tile-footer"},Yt={key:0},Zt={class:"token-count"},Jt=["onClick"],Xt={key:3},Qt=M({__name:"ProposalsView",setup(d){const g=re(),v=ae(),r=S(),c=S(!0),l=S([]),f=S({raritySelection:[],languageSelection:[],pseudonymSelection:[],cardName:void 0}),$=x(()=>l.value),_=x(()=>$.value.map(t=>t.card1)),P=x(()=>ce($.value.map(t=>t.language))),U=x(()=>ce($.value.map(t=>t.pseudo))),I=t=>t.name.toLowerCase().includes((f.value.cardName||"").toLowerCase()),z=x(()=>$.value.reduce((t,u)=>{const C=u.card1.rarity,{friend_id:G,icon:F,pseudo:q,language:de,other_user_date:$e}=u;if(f.value.raritySelection.length&&!f.value.raritySelection.includes(C)||f.value.languageSelection.length&&!f.value.languageSelection.includes(de||"")||f.value.pseudonymSelection.length&&!f.value.pseudonymSelection.includes(q||"")||f.value.cardName&&!I(u.card1)&&!I(u.card2))return t;const W=t.find(O=>O.rarity===C&&O.friendID===G);return W?(W.wantedCards.every(O=>O.id!==u.card1.id)&&W.wantedCards.push(u.card1),W.givenCards.every(O=>O.id!==u.card2.id)&&W.givenCards.push(u.card2)):t.push({rarity:C,friendID:G,icon:F,pseudo:q,language:de,lastUpdate:Y($e),wantedCards:[u.card1],givenCards:[u.card2]}),t},[])),A=t=>Me.value[t]||0,o=t=>Q.find(u=>u.id===t),y=t=>le[t].tradePrice,s=t=>{v.push({name:"message",params:{id:t.friendID},query:{i:t.icon,p:t.pseudo}})},b=()=>{window.location.reload()},m=async()=>{c.value=!0;try{const t=await pe(g.query.id);l.value=t.map(u=>({...u,card1:o(u.card_wanted),card2:o(u.card_to_give)}))}catch(t){r.value=t}c.value=!1};return ee(()=>g.query.id,m),_e(m),(t,u)=>(a(),D(X,null,{default:p(()=>[c.value?(a(),n("h2",Ht,"Loading your proposals…")):r.value?(a(),n(R,{key:1},[e("h2",Gt,k(r.value),1),i(se,{onClick:b},{default:p(()=>[...u[1]||(u[1]=[w("Refresh",-1)])]),_:1})],64)):$.value.length>0?(a(),n(R,{key:2},[u[5]||(u[5]=e("h2",null,"You’ve got a match!",-1)),i(He,{modelValue:f.value,"onUpdate:modelValue":u[0]||(u[0]=C=>f.value=C),cards:_.value,languages:P.value,pseudonyms:U.value},null,8,["modelValue","cards","languages","pseudonyms"]),e("div",qt,[(a(!0),n(R,null,L(z.value,(C,G)=>(a(),n("div",{class:"exchange-tile",key:G},[i(we,Re({class:"tile-title"},{ref_for:!0},C),null,16),e("div",Ot,[(a(!0),n(R,null,L(C.wantedCards,(F,q)=>(a(),n("div",{class:"card-container",key:q},[i(ne,{card:F},null,8,["card"])]))),128))]),u[4]||(u[4]=e("div",{class:"exchange-icon"},null,-1)),e("div",jt,[(a(!0),n(R,null,L(C.givenCards,(F,q)=>(a(),n("div",{class:"card-container",key:q},[i(ne,{card:F},null,8,["card"]),e("span",Kt,k(A(F.id)),1)]))),128))]),e("div",Wt,[C.language?(a(),n("div",Yt,k(C.language),1)):h("",!0),e("div",null,[u[2]||(u[2]=e("img",{src:ke,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",Zt,k(y(C.rarity)),1)]),e("div",{class:"clickable",onClick:F=>s(C)},[...u[3]||(u[3]=[e("img",{src:Nt,height:"20",alt:"Message"},null,-1)])],8,Jt)])]))),128))])],64)):(a(),n("h2",Xt,[...u[6]||(u[6]=[w(" No matching proposals for now :( ",-1),e("br",null,null,-1),w(" Please come back later! ",-1)])]))]),_:1}))}}),es=V(Qt,[["__scopeId","data-v-9b033f29"]]),ts="/images/icons/grid.svg",ss={},as={class:"hr-or"};function os(d,g){return a(),n("div",as,[Z(d.$slots,"default",{},()=>[g[0]||(g[0]=w("OR",-1))])])}const ls=V(ss,[["render",os],["__scopeId","data-v-e7568407"]]),ns={key:0,class:"column-center"},rs={class:"form-group"},is={key:0,class:"form-error"},ds={class:"form-group"},us={key:0,class:"form-error"},cs=5e3,ms=!0,vs=M({__name:"GitHubStargazer",emits:["success"],setup(d,{emit:g}){const v=g,r=S(!1),c=S(!1),l=S(""),f=S(""),$=S([]),_=S(12),P=S(0),U=oe({accessCode:!1,ghUsername:!1}),I=async()=>(await(await fetch("https://api.github.com/repos/flibustier/pokemon-tcg-exchange/stargazers")).json()).map(t=>t.login),z=x(()=>f.value.toUpperCase()==="FRIEND"),A=async()=>{if($.value.includes(l.value)||z.value||_.value<=0){console.log("ACCESS GRANTED"),v("success",z.value?"":l.value);return}if(l.value.length>0&&!r.value&&P.value>0){c.value=!0;return}U.ghUsername=l.value.length>0,U.accessCode=f.value.length>0},o=()=>{c.value=!1},y=async()=>{const b=await I();c.value&&ms&&_.value--,!(b.length===$.value.length&&_.value>0)&&(l.value===""&&(l.value=b.find(m=>!$.value.includes(m))||""),r.value=!0,$.value=b,clearInterval(P.value),A())},s=async()=>{$.value=await I(),P.value=setInterval(y,cs)};return he(()=>{clearInterval(P.value)}),(b,m)=>c.value?(a(),n("div",ns,[m[3]||(m[3]=e("img",{src:ts,alt:"",height:"40"},null,-1)),m[4]||(m[4]=e("p",null,"Checking GitHub Stargazers, please wait… (this could take up to one minute)",-1)),i(se,{type:"button",role:"button",onClick:o},{default:p(()=>[...m[2]||(m[2]=[w(" Cancel ",-1)])]),_:1})])):(a(),n(R,{key:1},[m[10]||(m[10]=e("p",null," In order to access to the messaging feature and others beta features, you need to star the repository on GitHub : ",-1)),e("span",{class:"github-btn-large",onClick:s},[...m[5]||(m[5]=[e("a",{class:"gh-btn",href:"https://github.com/flibustier/pokemon-tcg-exchange",rel:"noopener noreferrer",target:"_blank","aria-label":"Star pokemon-tcg-exchange on GitHub"},[e("span",{class:"gh-ico","aria-hidden":"true"}),e("span",{class:"gh-text"},"Star")],-1)])]),e("div",rs,[m[7]||(m[7]=e("label",{for:"username",class:"form-label"},"Enter your GitHub username :",-1)),H(e("input",{"onUpdate:modelValue":m[0]||(m[0]=t=>l.value=t),type:"text",id:"username",class:"form-input"},null,512),[[J,l.value]]),U.ghUsername&&l.value.length>0?(a(),n("p",is,[...m[6]||(m[6]=[w(" This username doesn’t seems to be a new stargazer, please retry in a few seconds or contact us at ",-1),e("a",{href:"mailto:help@pokemon-tcg.exchange?subject=Beta%20Access"},"help@pokemon-tcg.exchange",-1)])])):h("",!0)]),i(ls),m[11]||(m[11]=e("p",null,[w(" If you got a code given by our team, you can enter it here ("),e("b",null,"you don’t need it if you have a GitHub account"),w(") : ")],-1)),e("div",ds,[m[8]||(m[8]=e("label",{for:"accessCode",class:"form-label"},"Beta Access code",-1)),H(e("input",{"onUpdate:modelValue":m[1]||(m[1]=t=>f.value=t),type:"text",id:"accessCode",class:"form-input",autocapitalize:"characters"},null,512),[[J,f.value]]),U.accessCode?(a(),n("p",us," This code is not recognized. Please try again. ")):h("",!0)]),i(se,{type:"submit",role:"button",disabled:l.value.length<1&&f.value.length<3,onClick:A},{default:p(()=>[...m[9]||(m[9]=[w(" Submit ",-1)])]),_:1},8,["disabled"])],64))}}),gs=V(vs,[["__scopeId","data-v-a3745c42"]]),fs={class:"form"},ps=M({__name:"BetaAccessForm",setup(d){const g=ae(),v=async r=>{ye({...ie(),has_beta_access:!0,github_username:r}),await be(),g.back()};return(r,c)=>(a(),n("div",fs,[c[0]||(c[0]=e("h2",null,"Access to Beta features",-1)),i(gs,{onSuccess:v})]))}}),_s=V(ps,[["__scopeId","data-v-a0aaca68"]]),hs={class:"toggle-container"},ys={class:"switch-label"},bs=["disabled"],ks={class:"switch-text"},ws=M({__name:"ToggleSwitch",props:fe({disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const g=ve(d,"modelValue");return(v,r)=>(a(),n("div",hs,[e("label",ys,[H(e("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=c=>g.value=c),disabled:d.disabled,class:"switch-input"},null,8,bs),[[Ue,g.value]]),r[1]||(r[1]=e("span",{class:"switch-slider"},null,-1)),e("span",ks,[Z(v.$slots,"default",{},void 0)])])]))}}),T=V(ws,[["__scopeId","data-v-c0313374"]]),$s={class:"form-group"},Cs=["src"],Ss={key:0,class:"icon-list"},Is=["onClick"],Vs=["src"],xs={class:"form-group"},Rs={class:"form-group"},Ms={class:"form-group"},Us=["value"],As={class:"form-group"},Bs={class:"form-group"},Ds=65,Ps=M({__name:"SettingsForm",setup(d){const g=["ENG","SPA","FRA","GER","ITA","POR","JPN","KOR","CHT"],v=ae(),{rarity_rules:r,...c}=ie(),l=oe({pseudo:"",icon:"000",language:"",accept_notifications:!0,has_beta_access:!1,...c}),f=S(!1),$=S(!1),_=oe({C:!0,U:!0,R:!0,RR:!0,AR:!0,SR:!0,SAR:!0,S:!0,SSR:!0,...(r||[]).reduce((A,o)=>({...A,[o.rarity]:o.enabled===1}),{})});ee(()=>[l,_],()=>{$.value=!1},{deep:!0});const P=x(()=>`/images/avatars/${l.icon||"000"}.png`),U=A=>{l.icon=String(A).padStart(3,"0"),f.value=!1},I=()=>{v.push({name:"beta"})},z=async()=>{ye({...l,rarity_rules:Object.entries(_).map(([A,o])=>({rarity:A,enabled:o?1:0}))}),$.value=await be()||!1};return(A,o)=>{const y=te("RouterLink");return a(),n("form",{class:"friend-form",onSubmit:ge(z,["prevent"])},[o[23]||(o[23]=e("h2",null,"Settings",-1)),e("div",$s,[o[14]||(o[14]=e("label",{for:"icon",class:"form-label label-center"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:o[0]||(o[0]=s=>f.value=!f.value)},[e("img",{src:P.value,alt:"Selected Icon",id:"icon"},null,8,Cs)]),f.value?(a(),n("div",Ss,[(a(),n(R,null,L(Ds,s=>e("div",{key:s,class:"icon-item",onClick:b=>U(s)},[e("img",{src:`/images/avatars/${String(s).padStart(3,"0")}.png`,alt:"Icon"},null,8,Vs)],8,Is)),64))])):h("",!0)]),e("div",xs,[o[15]||(o[15]=e("label",{for:"friendId",class:"form-label"},"Friend ID",-1)),H(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>l.friend_id=s),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16",disabled:!0},null,512),[[J,l.friend_id]])]),e("div",Rs,[o[16]||(o[16]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),H(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>l.pseudo=s),type:"text",id:"pseudo",class:"friend-id",maxlength:"14",required:""},null,512),[[J,l.pseudo]])]),e("div",Ms,[o[18]||(o[18]=e("label",{for:"language-input",class:"form-label"},"Your card’s language",-1)),H(e("select",{id:"language-input","onUpdate:modelValue":o[3]||(o[3]=s=>l.language=s),class:"language-input",required:""},[o[17]||(o[17]=e("option",{value:""},"Please select",-1)),(a(),n(R,null,L(g,s=>e("option",{key:s,value:s},k(s),9,Us)),64))],512),[[Ae,l.language]])]),e("div",As,[o[19]||(o[19]=e("label",{class:"form-label"},"Accept exchange of rarity:",-1)),i(T,{modelValue:_.C,"onUpdate:modelValue":o[4]||(o[4]=s=>_.C=s)},{default:p(()=>[i(E,{rarity:"C"})]),_:1},8,["modelValue"]),i(T,{modelValue:_.U,"onUpdate:modelValue":o[5]||(o[5]=s=>_.U=s)},{default:p(()=>[i(E,{rarity:"U"})]),_:1},8,["modelValue"]),i(T,{modelValue:_.R,"onUpdate:modelValue":o[6]||(o[6]=s=>_.R=s)},{default:p(()=>[i(E,{rarity:"R"})]),_:1},8,["modelValue"]),i(T,{modelValue:_.RR,"onUpdate:modelValue":o[7]||(o[7]=s=>_.RR=s)},{default:p(()=>[i(E,{rarity:"RR"})]),_:1},8,["modelValue"]),i(T,{modelValue:_.AR,"onUpdate:modelValue":o[8]||(o[8]=s=>_.AR=s)},{default:p(()=>[i(E,{rarity:"AR"})]),_:1},8,["modelValue"]),i(T,{modelValue:_.SR,"onUpdate:modelValue":[o[9]||(o[9]=s=>_.SR=s),o[10]||(o[10]=s=>_.SAR=s)]},{default:p(()=>[i(E,{rarity:"SR"})]),_:1},8,["modelValue"]),i(T,{modelValue:_.S,"onUpdate:modelValue":o[11]||(o[11]=s=>_.S=s)},{default:p(()=>[i(E,{rarity:"S"})]),_:1},8,["modelValue"]),i(T,{modelValue:_.SSR,"onUpdate:modelValue":o[12]||(o[12]=s=>_.SSR=s)},{default:p(()=>[i(E,{rarity:"SSR"})]),_:1},8,["modelValue"])]),e("div",Bs,[i(T,{modelValue:l.accept_notifications,"onUpdate:modelValue":o[13]||(o[13]=s=>l.accept_notifications=s)},{default:p(()=>[...o[20]||(o[20]=[w(" Email notifications ",-1)])]),_:1},8,["modelValue"]),i(T,{"model-value":l.has_beta_access,disabled:l.has_beta_access,"onUpdate:modelValue":I},{default:p(()=>[...o[21]||(o[21]=[w(" Access beta features (messages, …) ",-1)])]),_:1},8,["model-value","disabled"])]),i(se,{type:"submit",role:"button",disabled:$.value},{default:p(()=>[w(k($.value?"Saved!":"Save"),1)]),_:1},8,["disabled"]),i(y,{to:"/logout",class:"danger"},{default:p(()=>[...o[22]||(o[22]=[w("Logout",-1)])]),_:1})],32)}}}),Ts=V(Ps,[["__scopeId","data-v-4a76d791"]]),Ls={class:"icon"},zs=M({__name:"MenuButton",props:{route:{},label:{},withNotificationDot:{type:Boolean}},setup(d){const g=d;return(v,r)=>{const c=te("RouterLink");return a(),D(c,{class:"portfolio-btn",to:{name:g.route}},{default:p(()=>[e("span",Ls,[Z(v.$slots,"default",{},void 0,!0)]),e("span",{class:K(["label",{"notification-dot":d.withNotificationDot}])},k(d.label||Be(d.route)),3)]),_:3},8,["to"])}}}),j=V(zs,[["__scopeId","data-v-1e8d3610"]]),Es={key:0,class:"prices"},Fs={class:"rarity"},Ns=["src","alt","title"],Hs=M({__name:"PacksInformations",setup(d){const g=r=>r.reduce((c,l)=>{for(const f of l.packs||[])c[f||""]=(c[f||""]||0)+l.count;return c},{}),v=x(()=>Object.entries(g(me.value)).sort((r,c)=>c[1]-r[1]));return(r,c)=>B(me).length>0?(a(),n("div",Es,[c[0]||(c[0]=e("h3",null,"Best packs to open :",-1)),(a(!0),n(R,null,L(v.value,([l,f])=>(a(),n("div",{class:"price",key:l},[e("div",Fs,[e("img",{src:`/images/packs/${l}.webp`,alt:l,height:"100px",title:l+" booster pack"},null,8,Ns)]),e("span",null,k(f)+" cards wanted inside",1)]))),128))])):h("",!0)}}),Gs=V(Hs,[["__scopeId","data-v-718eec61"]]),qs={class:"flex-wrap"},Os=M({__name:"InsightView",setup(d){return(g,v)=>(a(),D(X,null,{default:p(()=>[v[0]||(v[0]=e("h2",{style:{"margin-bottom":"2rem"}},"Some insights to fulfill your collection",-1)),e("div",qs,[i(Ge,{id:"prices","show-giving":""}),i(Gs)])]),_:1}))}}),js=V(Os,[["__scopeId","data-v-90a24a1d"]]),Ks={class:"aside"},Ws={class:"content"},Ys=M({__name:"AccountView",setup(d){const g=re(),v=x(()=>g.name),r=x(()=>["wishlist","offers"].includes(v.value??""));return(c,l)=>(a(),n("main",null,[e("div",Ks,[e("nav",null,[i(j,{route:"wishlist"},{default:p(()=>[i(De)]),_:1}),i(j,{route:"offers"},{default:p(()=>[i(Pe)]),_:1}),i(j,{route:"proposals"},{default:p(()=>[i(Te)]),_:1}),i(j,{route:"messages","with-notification-dot":B(ze)},{default:p(()=>[i(Le)]),_:1},8,["with-notification-dot"]),i(j,{label:"Account",route:"settings","with-notification-dot":B(Fe)},{default:p(()=>[i(Ee)]),_:1},8,["with-notification-dot"]),i(j,{route:"insights"},{default:p(()=>[i(Ne)]),_:1})])]),e("div",Ws,[r.value?(a(),D(qe,{key:0,step:v.value==="wishlist"?1:2},null,8,["step"])):h("",!0),v.value==="proposals"?(a(),D(es,{key:1})):h("",!0),v.value==="settings"||v.value==="account"?(a(),D(X,{key:2},{default:p(()=>[i(Ts)]),_:1})):h("",!0),v.value==="beta"?(a(),D(X,{key:3},{default:p(()=>[i(_s)]),_:1})):h("",!0),v.value.startsWith("message")?(a(),D(Ft,{key:4})):h("",!0),v.value==="insights"?(a(),D(js,{key:5})):h("",!0)])]))}}),ea=V(Ys,[["__scopeId","data-v-297c2756"]]);export{ea as default};
