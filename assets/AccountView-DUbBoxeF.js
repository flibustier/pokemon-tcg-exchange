import{d as $,c as o,u as F,n as M,a as e,f as p,t as g,o as t,_ as C,g as R,h as N,i as G,r as I,w as T,j as b,k as U,b as h,l as S,v as V,F as m,m as w,P as L,p as P,e as B,q as j,x as z,y as H,z as W,A as y,B as q,C as E,D as J,E as A,G as O,H as Y,I as K,J as Q}from"./index-DxoMlmC8.js";import{C as D}from"./CenteredLayout-CO1iSqqj.js";const X="/images/icons/exchange.svg",Z={class:"icon"},ee={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},se={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},te={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ae={key:3,src:X,width:"32",height:"32"},ne={class:"label"},oe=$({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean}},setup(k){const n=F(),a=k,c=()=>n.push({name:a.label.toLowerCase()});return(i,r)=>(t(),o("button",{class:M(["portfolio-btn",{active:i.active}]),onClick:c},[e("span",Z,[i.icon==="portfolio"?(t(),o("svg",ee,r[0]||(r[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):i.icon==="heart"?(t(),o("svg",se,r[1]||(r[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):i.icon==="gear"?(t(),o("svg",te,r[2]||(r[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):p("",!0),i.icon==="exchange"?(t(),o("img",ae)):p("",!0)]),e("span",ne,g(i.label),1)],2))}}),x=C(oe,[["__scopeId","data-v-b8091c95"]]),ie={class:"form-group"},re={class:"form-group"},le={class:"form-group"},de=["src"],ce={key:0,class:"icon-list"},ue=["onClick"],ve=["src"],_e=$({__name:"SettingsForm",setup(k){const n=R({pseudo:"",icon:"000",...G(),friend_id:N()}),a=I(!1),c=I(!1);T(()=>[n.friend_id,n.pseudo,n.icon],()=>{c.value=!1});const i=b(()=>`/images/avatars/${n.icon}.png`),r=l=>{n.icon=String(l).padStart(3,"0"),a.value=!1},v=async()=>{j(n),c.value=await z()||!1};return(l,s)=>(t(),o("form",{class:"friend-form",onSubmit:U(v,["prevent"])},[e("div",ie,[s[3]||(s[3]=e("label",{for:"friendId",class:"form-label"},'Friend ID (16 digits without "-")',-1)),S(e("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>n.friend_id=d),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16"},null,512),[[V,n.friend_id]])]),e("div",re,[s[4]||(s[4]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),S(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>n.pseudo=d),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[V,n.pseudo]])]),e("div",le,[s[5]||(s[5]=e("label",{for:"icon",class:"form-label"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:s[2]||(s[2]=d=>a.value=!a.value)},[e("img",{src:i.value,alt:"Selected Icon",id:"icon"},null,8,de)]),a.value?(t(),o("div",ce,[(t(),o(m,null,w(35,d=>e("div",{key:d,class:"icon-item",onClick:f=>r(d)},[e("img",{src:`/images/avatars/${String(d).padStart(3,"0")}.png`,alt:"Icon"},null,8,ve)],8,ue)),64))])):p("",!0)]),h(L,{type:"submit",role:"button",disabled:c.value},{default:P(()=>[B(g(c.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),fe=C(_e,[["__scopeId","data-v-cd3c2205"]]),pe={class:"list"},he={class:"tile-title"},me={class:"cards"},ge=["src","alt"],ke={class:"cards"},ye=["src","alt"],we={class:"card-count"},be={class:"tile-footer"},$e={class:"token-count"},Ce={key:1},xe=$({__name:"ProposalsView",setup(k){const n=I([]),a=b(()=>n.value.reduce((l,s)=>{const d=s.card1.rarityCode,f=s.friend_id,u=l.find(_=>_.rarity===d&&_.friendID===f);return u?(u.wantedCards.every(_=>_.id!==s.card1.id)&&u.wantedCards.push(s.card1),u.givenCards.every(_=>_.id!==s.card2.id)&&u.givenCards.push(s.card2)):l.push({rarity:d,friendID:f,wantedCards:[s.card1],givenCards:[s.card2]}),l},[])),c=l=>q.value[l]||0,i=l=>{const[s,d]=l.split("-");return{id:l,...J.find(f=>f.set===s&&f.number===parseInt(d))}},r=l=>l.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"),v=l=>{switch(l){case"R":return 120;case"RR":return 500;case"AR":return 400}return 0};return H(async()=>{const l=await W();n.value=l.map(s=>({...s,card1:i(s.card_wanted),card2:i(s.card_to_give)}))}),(l,s)=>(t(),y(D,{style:{padding:"2rem 0"}},{default:P(()=>[n.value.length>0?(t(),o(m,{key:0},[s[2]||(s[2]=e("h2",null,"You’ve got a match!",-1)),e("div",pe,[(t(!0),o(m,null,w(a.value,(d,f)=>(t(),o("div",{class:"exchange-tile",key:f},[e("span",he,"Friend ID : "+g(r(d.friendID)),1),e("div",me,[(t(!0),o(m,null,w(d.wantedCards,(u,_)=>(t(),o("div",{class:"card-container",key:_},[e("img",{src:`/images/cards/thumbnails/${u.imageName}`,alt:u.label.eng,class:"card-image"},null,8,ge)]))),128))]),s[1]||(s[1]=e("div",{class:"exchange-icon"},null,-1)),e("div",ke,[(t(!0),o(m,null,w(d.givenCards,(u,_)=>(t(),o("div",{class:"card-container",key:_},[e("img",{src:`/images/cards/thumbnails/${u.imageName}`,alt:u.label.eng,class:"card-image"},null,8,ye),e("span",we,g(c(u.id)),1)]))),128))]),e("div",be,[s[0]||(s[0]=e("img",{src:E,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",$e,g(v(d.rarity)),1)])]))),128))])],64)):(t(),o("h2",Ce,s[3]||(s[3]=[B(" No matching proposals for now :( "),e("br",null,null,-1),B(" Please come back later! ")])))]),_:1}))}}),Ie=C(xe,[["__scopeId","data-v-f139da15"]]),Be={key:0,class:"prices"},Pe={class:"rarity"},Se=["src","alt","title"],Ve=$({__name:"PacksInformations",setup(k){const n=c=>c.reduce((i,r)=>{console.log(r);for(const v of r.packs||[])i[v||""]=(i[v||""]||0)+r.count;return i},{}),a=b(()=>n(A.value));return(c,i)=>O(A).length>0?(t(),o("div",Be,[i[0]||(i[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(t(!0),o(m,null,w(a.value,(r,v)=>(t(),o("div",{class:"price",key:r},[e("div",Pe,[e("img",{src:`/images/packs/${v}.webp`,alt:v,height:"100px",title:v+" booster pack"},null,8,Se)]),e("span",null,g(a.value[v])+" cards wanted inside",1)]))),128))])):p("",!0)}}),Ae=C(Ve,[["__scopeId","data-v-a27dfee0"]]),De={class:"aside"},Fe={class:"content"},Me=$({__name:"AccountView",setup(k){const n=Y(),a=b(()=>n.name),c=b(()=>["wishlist","offers"].includes(a.value??""));return(i,r)=>(t(),o("main",null,[e("div",De,[e("nav",null,[h(x,{label:"Wishlist",icon:"heart",active:a.value==="wishlist"},null,8,["active"]),h(x,{label:"Offers",icon:"portfolio",active:a.value==="offers"},null,8,["active"]),h(x,{label:"Proposals",icon:"exchange",active:a.value==="proposals"},null,8,["active"]),h(x,{label:"Account",icon:"gear",active:a.value==="account"},null,8,["active"])]),c.value?(t(),y(K,{key:0,id:"prices",showGiving:a.value==="offers"},null,8,["showGiving"])):p("",!0)]),e("div",Fe,[c.value?(t(),y(Q,{key:0,step:a.value==="wishlist"?1:2},null,8,["step"])):p("",!0),a.value==="proposals"?(t(),y(Ie,{key:1})):p("",!0),a.value==="account"?(t(),y(D,{key:2,style:{gap:"2rem"}},{default:P(()=>[r[0]||(r[0]=e("h2",null,"Settings",-1)),h(fe),h(Ae)]),_:1,__:[0]})):p("",!0)])]))}}),Ge=C(Me,[["__scopeId","data-v-a023504d"]]);export{Ge as default};
