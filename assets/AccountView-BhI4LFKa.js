import{d as P,u as U,c as a,o as s,n as L,a as e,g as _,t as p,_ as S,h as j,i as z,j as H,r as x,k as W,l as B,m as q,b as m,p as F,v as M,F as k,q as I,w as R,e as D,P as G,x as E,y as O,z as J,A as Y,f as C,B as K,C as Q,D as X,E as N,G as Z,H as ee,I as se,J as te}from"./app-CRy21jen.js";import{C as T}from"./CenteredLayout-C-7VvV4P.js";const ae="/images/icons/exchange.svg",ne={class:"icon"},oe={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},ie={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},re={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},le={key:3,src:ae,width:"32",height:"32"},de={class:"label"},ce=P({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean}},setup(w){const i=U(),n=w,l=()=>i.push({name:n.label.toLowerCase()});return(r,o)=>(s(),a("button",{class:L(["portfolio-btn",{active:r.active}]),onClick:l},[e("span",ne,[r.icon==="portfolio"?(s(),a("svg",oe,o[0]||(o[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):r.icon==="heart"?(s(),a("svg",ie,o[1]||(o[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):r.icon==="gear"?(s(),a("svg",re,o[2]||(o[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):_("",!0),r.icon==="exchange"?(s(),a("img",le)):_("",!0)]),e("span",de,p(r.label),1)],2))}}),A=S(ce,[["__scopeId","data-v-b8091c95"]]),ue={class:"form-group"},ve={class:"form-group"},_e={class:"form-group"},fe=["src"],he={key:0,class:"icon-list"},me=["onClick"],pe=["src"],ge=P({__name:"SettingsForm",setup(w){const i=j({pseudo:"",icon:"000",...H(),friend_id:z()}),n=x(!1),l=x(!1);W(()=>[i.friend_id,i.pseudo,i.icon],()=>{l.value=!1});const r=B(()=>`/images/avatars/${i.icon||"000"}.png`),o=V=>{i.icon=String(V).padStart(3,"0"),n.value=!1},f=async()=>{E(i),l.value=await O()||!1};return(V,c)=>(s(),a("form",{class:"friend-form",onSubmit:q(f,["prevent"])},[e("div",ue,[c[3]||(c[3]=e("label",{for:"friendId",class:"form-label"},'Friend ID (16 digits without "-")',-1)),F(e("input",{"onUpdate:modelValue":c[0]||(c[0]=v=>i.friend_id=v),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16"},null,512),[[M,i.friend_id]])]),e("div",ve,[c[4]||(c[4]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),F(e("input",{"onUpdate:modelValue":c[1]||(c[1]=v=>i.pseudo=v),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[M,i.pseudo]])]),e("div",_e,[c[5]||(c[5]=e("label",{for:"icon",class:"form-label"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:c[2]||(c[2]=v=>n.value=!n.value)},[e("img",{src:r.value,alt:"Selected Icon",id:"icon"},null,8,fe)]),n.value?(s(),a("div",he,[(s(),a(k,null,I(37,v=>e("div",{key:v,class:"icon-item",onClick:d=>o(v)},[e("img",{src:`/images/avatars/${String(v).padStart(3,"0")}.png`,alt:"Icon"},null,8,pe)],8,me)),64))])):_("",!0)]),m(G,{type:"submit",role:"button",disabled:l.value},{default:R(()=>[D(p(l.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),ke=S(ge,[["__scopeId","data-v-c0ef0148"]]),ye={key:0},we={style:{"margin-bottom":"2rem"}},be={class:"list"},$e={class:"tile-title"},Ce=["src"],xe={key:0},Ie={class:"cards"},Be=["src","alt"],Pe={class:"cards"},Se=["src","alt"],Ve={class:"card-count"},Ae={class:"tile-footer"},De={class:"token-count"},Re={key:3},Fe=P({__name:"ProposalsView",setup(w){const i=x([]),n=x(!0),l=x(),r=B(()=>i.value.reduce((d,t)=>{const u=t.card1.rarityCode,{friend_id:g,icon:h,pseudo:b}=t,$=d.find(y=>y.rarity===u&&y.friendID===g);return $?($.wantedCards.every(y=>y.id!==t.card1.id)&&$.wantedCards.push(t.card1),$.givenCards.every(y=>y.id!==t.card2.id)&&$.givenCards.push(t.card2)):d.push({rarity:u,friendID:g,icon:h,pseudo:b,wantedCards:[t.card1],givenCards:[t.card2]}),d},[])),o=d=>K.value[d]||0,f=d=>{const[t,u]=d.split("-");return{id:d,...X.find(g=>g.set===t&&g.number===parseInt(u))}},V=d=>d.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"),c=d=>{switch(d){case"R":return 120;case"RR":return 500;case"AR":return 400}return 0},v=()=>{window.location.reload()};return J(async()=>{n.value=!0;try{const d=await Y();i.value=d.map(t=>({...t,card1:f(t.card_wanted),card2:f(t.card_to_give)}))}catch(d){l.value=d}n.value=!1}),(d,t)=>(s(),C(T,{style:{padding:"2rem 0"}},{default:R(()=>[n.value?(s(),a("h2",ye,"Loading your proposals…")):l.value?(s(),a(k,{key:1},[e("h2",we,p(l.value),1),m(G,{onClick:v},{default:R(()=>t[0]||(t[0]=[D("Refresh")])),_:1,__:[0]})],64)):i.value.length>0?(s(),a(k,{key:2},[t[3]||(t[3]=e("h2",null,"You’ve got a match!",-1)),e("div",be,[(s(!0),a(k,null,I(r.value,(u,g)=>(s(),a("div",{class:"exchange-tile",key:g},[e("div",$e,[u.icon&&u.icon!=="000"?(s(),a("img",{key:0,src:`/images/avatars/${u.icon}.png`,height:"40px",alt:""},null,8,Ce)):_("",!0),e("div",null,[u.pseudo?(s(),a("div",xe,p(u.pseudo),1)):_("",!0),e("div",null,"ID "+p(V(u.friendID)),1)])]),e("div",Ie,[(s(!0),a(k,null,I(u.wantedCards,(h,b)=>(s(),a("div",{class:"card-container",key:b},[e("img",{src:`/images/cards/thumbnails/${h.imageName}`,alt:h.label.eng,class:"card-image"},null,8,Be)]))),128))]),t[2]||(t[2]=e("div",{class:"exchange-icon"},null,-1)),e("div",Pe,[(s(!0),a(k,null,I(u.givenCards,(h,b)=>(s(),a("div",{class:"card-container",key:b},[e("img",{src:`/images/cards/thumbnails/${h.imageName}`,alt:h.label.eng,class:"card-image"},null,8,Se),e("span",Ve,p(o(h.id)),1)]))),128))]),e("div",Ae,[t[1]||(t[1]=e("img",{src:Q,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",De,p(c(u.rarity)),1)])]))),128))])],64)):(s(),a("h2",Re,t[4]||(t[4]=[D(" No matching proposals for now :( "),e("br",null,null,-1),D(" Please come back later! ")])))]),_:1}))}}),Me=S(Fe,[["__scopeId","data-v-e094f3ec"]]),Ne={key:0,class:"prices"},Ge={class:"rarity"},Te=["src","alt","title"],Ue=P({__name:"PacksInformations",setup(w){const i=l=>l.reduce((r,o)=>{for(const f of o.packs||[])r[f||""]=(r[f||""]||0)+o.count;return r},{}),n=B(()=>Object.entries(i(N.value)).sort((l,r)=>r[1]-l[1]));return(l,r)=>Z(N).length>0?(s(),a("div",Ne,[r[0]||(r[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(s(!0),a(k,null,I(n.value,([o,f])=>(s(),a("div",{class:"price",key:o},[e("div",Ge,[e("img",{src:`/images/packs/${o}.webp`,alt:o,height:"100px",title:o+" booster pack"},null,8,Te)]),e("span",null,p(f)+" cards wanted inside",1)]))),128))])):_("",!0)}}),Le=S(Ue,[["__scopeId","data-v-f29dc244"]]),je={class:"aside"},ze={class:"content"},He=P({__name:"AccountView",setup(w){const i=ee(),n=B(()=>i.name),l=B(()=>["wishlist","offers"].includes(n.value??""));return(r,o)=>(s(),a("main",null,[e("div",je,[e("nav",null,[m(A,{label:"Wishlist",icon:"heart",active:n.value==="wishlist"},null,8,["active"]),m(A,{label:"Offers",icon:"portfolio",active:n.value==="offers"},null,8,["active"]),m(A,{label:"Proposals",icon:"exchange",active:n.value==="proposals"},null,8,["active"]),m(A,{label:"Account",icon:"gear",active:n.value==="account"},null,8,["active"])]),l.value?(s(),C(se,{key:0,id:"prices",showGiving:n.value==="offers"},null,8,["showGiving"])):_("",!0)]),e("div",ze,[l.value?(s(),C(te,{key:0,step:n.value==="wishlist"?1:2},null,8,["step"])):_("",!0),n.value==="proposals"?(s(),C(Me,{key:1})):_("",!0),n.value==="account"?(s(),C(T,{key:2,style:{gap:"2rem"}},{default:R(()=>[o[0]||(o[0]=e("h2",null,"Settings",-1)),m(ke),m(Le)]),_:1,__:[0]})):_("",!0)])]))}}),Ee=S(He,[["__scopeId","data-v-176c3591"]]);export{Ee as default};
