import{d as A,c as V,a as n,n as G,b as p,e,f as w,t as b,o as s,_ as R,m as me,u as ge,w as fe,r as Q,g as S,h as T,i as k,F as I,j as L,k as B,l as xe,p as c,q as ie,s as X,v as N,x as ee,y as pe,z as Z,A as Y,B as he,C as ue,D as _e,E as ae,G as H,H as J,I as Ve,J as Ie,K as Re,L as re,M as Me,N as ce,O as Ue,P as Be,Q as ve,R as oe,S as ye,T as be,U as Ae,V as De,W as Pe,X as Te}from"./app-BSjD5TEj.js";import{_ as ke,r as le,C as Le,a as F,P as ze,b as Fe}from"./CardsGrid-IfkXaOR2.js";import{C as te}from"./CenteredLayout-UBhqPotQ.js";import{P as se}from"./PlainButton-CNrZcsdU.js";const we="/images/icons/exchange.svg",Ee=["src"],Ne={key:0};const Ge={style:{display:"flex"}},He=["title"],qe=A({__name:"UserBadge",props:{icon:{},pseudo:{},language:{},friendID:{},withoutBorder:{type:Boolean},lastUpdate:{}},setup(i){const f=V(()=>i.friendID.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4")),v=r=>{navigator.clipboard.writeText(r)};return(r,u)=>(s(),n("div",{class:G(["user-badge",{"with-border":!i.withoutBorder}])},[i.icon&&i.icon!=="000"?(s(),n("img",{key:0,src:`/images/avatars/${i.icon}.png`,height:"40px",alt:""},null,8,Ee)):p("",!0),e("div",null,[i.pseudo?(s(),n("div",Ne,[w(b(i.pseudo)+" ",1),(i.language,p("",!0))])):p("",!0),e("div",Ge,[w(" ID "+b(f.value)+" ",1),e("button",{onClick:u[0]||(u[0]=o=>v(i.friendID)),class:"copy-button",title:"Copy ID"},[...u[1]||(u[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)])])]),i.lastUpdate?(s(),n("div",{key:1,class:"time",title:"The last update from this user is "+i.lastUpdate},b(i.lastUpdate),9,He)):p("",!0)])],2))}}),$e=R(qe,[["__scopeId","data-v-125c0895"]]),Oe="/images/BoosterPoints.png",je={class:"modal-header"},We={class:"column modal-body"},Ke={key:0,class:"modal-footer"},Ye=A({__name:"BaseModal",props:me({title:{type:String,default:""}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const f=ge(i,"modelValue"),v=()=>{f.value=!1};return(r,u)=>f.value?(s(),n("div",{key:0,class:"modal",onClick:v},[e("div",{class:"modal-content",onClick:u[0]||(u[0]=fe(()=>{},["stop"]))},[e("div",je,[e("h2",null,b(i.title),1),e("button",{class:"close",onClick:v,title:"Close this dialog"})]),e("div",We,[Q(r.$slots,"default",{},void 0),r.$slots.footer?(s(),n("div",Ke,[Q(r.$slots,"footer",{},void 0)])):p("",!0)])])])):p("",!0)}}),Je=R(Ye,[["__scopeId","data-v-083339a3"]]),Xe={class:"flex"},Ze=["src","alt"],Qe={class:"column"},et=["src","alt"],tt={class:"row",style:{"overflow-x":"scroll"}},st=["src","alt"],at={class:"row"},ot={class:"row"},lt=A({__name:"CardModal",props:{card:{}},setup(i,{expose:f}){const v=S(!1);return f({showModal:()=>{console.log("showModal"),v.value=!0}}),(u,o)=>(s(),T(Je,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=g=>v.value=g),title:i.card.name+` (${i.card.id})`},{default:k(()=>[e("div",Xe,[e("img",{src:`/images/cards/${i.card.image}`,class:"responsive-image",width:"367",height:"512",alt:i.card.name,loading:"lazy"},null,8,Ze),e("div",Qe,[e("img",{src:`/images/sets/LOGO_expansion_${i.card.set}_en_US.webp`,alt:i.card.set,class:"responsive-image",width:"256",loading:"lazy"},null,8,et),e("div",tt,[(s(!0),n(I,null,L(i.card.packs,g=>(s(),n("img",{key:g,src:`/images/packs/${g}.webp`,alt:g,class:"responsive-image",height:"192",width:"120",loading:"lazy"},null,8,st))),128))]),e("div",at,[o[1]||(o[1]=e("img",{src:ke,width:"28",height:"28",alt:"Shine dust cost"},null,-1)),e("span",null,b(B(le)[i.card.rarity].tradePrice),1)]),e("div",ot,[o[2]||(o[2]=e("img",{src:Oe,height:"32",alt:"Booster points cost"},null,-1)),e("span",null,b(B(le)[i.card.rarity].points),1)])])])]),_:1},8,["modelValue","title"]))}}),nt=R(lt,[["__scopeId","data-v-16820e3f"]]),it=["src","alt","title"],rt=A({__name:"CardImageAndModal",props:{card:{}},setup(i){const f=xe("modal");return(v,r)=>(s(),n(I,null,[e("img",{src:`/images/cards/thumbnails/${i.card.image}`,alt:i.card.name,class:"card-thumbnail",width:"135",height:"188",loading:"lazy",title:i.card.id,onClick:r[0]||(r[0]=()=>f.value?.showModal())},null,8,it),c(nt,{card:i.card,ref_key:"modal",ref:f},null,8,["card"])],64))}}),ne=R(rt,[["__scopeId","data-v-ecafd2b6"]]),dt={key:1,class:"messenger"},ut={class:"discussion-list"},ct=["onClick"],vt=["src"],mt={key:1,class:"avatar"},gt={class:"content"},ft={key:0,class:"name"},pt={key:0,class:"language"},ht={key:1,class:"name"},_t={class:"last-message"},yt={key:0},bt={class:"time"},kt={class:"chat-header"},wt={key:0,class:"actions show-mobile"},$t={viewBox:"6 6 24 24",fill:"currentColor",width:"20",height:"20","aria-hidden":"true",style:{"--color":"var(--primary-color)"},overflow:"visible"},Ct={class:"actions"},St={class:"chat-messages"},xt=["title"],Vt={key:0,class:"message-image-container"},It={class:"time"},Rt={key:0},Mt={key:1},Ut={class:"chat-input"},Bt=["disabled"],At=A({__name:"MessagesView",setup(i){const f=ie(),v=X(),r=V(()=>Array.isArray(f.params.id)?f.params.id[0]:f.params.id),u=S([]),o=S(""),g=S(!1),$=V(()=>N.value.find(_=>_.friend_id===r.value)),h=async _=>{g.value=!1,await v.push({name:"message",params:{id:_}})},D=async()=>{if(o.value.length<1)return;const _=await Ie(r.value,o.value);_==="created"?(o.value="",await M()):u.value.push({from:"error",to:r.value,message:_,sent:new Date().toISOString(),read:null})},M=async()=>{if(r.value){const _=u.value.length;u.value=(await Re(r.value)).reverse();const a=u.value.length;u.value.length===0&&!re().has_beta_access&&v.push({name:"beta"}),$.value?.read===!1&&await ue(),_!==a&&Me(()=>{const y=document.querySelector(".chat-messages");y&&(y.scrollTop=y.scrollHeight)})}};ee(r,M);const x=S([]);ee(r,async()=>{x.value.length>0&&(x.value=[]),r.value&&(await pe(r.value)).forEach(({card_wanted:a,card_to_give:y})=>{const m=Z.find(d=>d.id===a);m&&!x.value.find(d=>d.id===m.id)&&x.value.push(m);const t=Z.find(d=>d.id===y);t&&!x.value.find(d=>d.id===t.id)&&x.value.push(t)})},{immediate:!0});const z=_=>{const a=/([a-zA-Z][0-9][abAB]?\-[0-9]{1,3})/g,y=[];let m;for(;(m=a.exec(_))!==null;){const t=m[1].toUpperCase(),d=Z.find(C=>C.id===t);d&&y.push(d)}return _.split(" ").forEach(t=>{const d=x.value.filter(C=>C.name.toLowerCase()===t.toLowerCase());d.length>0&&y.push(...d)}),y},U=V(()=>u.value.map((_,a)=>{const y=["me","error"].includes(_.from);return{..._,images:z(_.message),formattedSentDate:Y(_.sent),isFromMe:y,formattedReadDate:_.read&&y&&(a===u.value.length-1||u.value[a+1].read===null)?Y(_.read):null}}));let l;return he(async()=>{await ue(),!r.value&&N.value.length>0&&await h(N.value[0].friend_id),M(),l=setInterval(M,10*1e3),o.value=localStorage.getItem("draft_message")||"",localStorage.removeItem("draft_message")}),_e(()=>{o.value.length>0&&localStorage.setItem("draft_message",o.value),clearInterval(l)}),(_,a)=>{const y=ae("router-link"),m=ae("RouterLink");return!r.value&&B(N).length===0?(s(),T(te,{key:0},{default:k(()=>[e("h2",null,[a[3]||(a[3]=w(" You don’t have any conversation yet. ",-1)),a[4]||(a[4]=e("br",null,null,-1)),a[5]||(a[5]=w(" Please use the ",-1)),c(y,{to:"/account/proposals"},{default:k(()=>[...a[2]||(a[2]=[w("proposals",-1)])]),_:1}),a[6]||(a[6]=w(" menu to start a new one. ",-1))])]),_:1})):(s(),n("div",dt,[B(N).length>0?(s(),n("div",{key:0,class:G(["discussions",{"hidden-mobile":!g.value}])},[p("",!0),e("ul",ut,[(s(!0),n(I,null,L(B(N),t=>(s(),n("li",{key:t.friend_id,class:G(["discussion-item",{active:t.friend_id===r.value,unread:t.read===!1}]),onClick:d=>h(t.friend_id)},[t.avatar!==""?(s(),n("img",{key:0,src:`/images/avatars/${t.avatar}.png`,class:"avatar",height:"40px",alt:""},null,8,vt)):(s(),n("div",mt,b(t.friend_id.slice(-4)),1)),e("div",gt,[t.pseudo!==""?(s(),n("div",ft,[w(b(t.pseudo)+" ",1),t.language!==""?(s(),n("span",pt,"("+b(t.language)+")",1)):p("",!0)])):(s(),n("div",ht,b(t.friend_id),1)),e("div",_t,[w(b(t.last_message)+" ",1),t.last_message.length===25?(s(),n("span",yt,"…")):p("",!0)]),e("div",bt,b(B(Y)(t.last_message_date)),1)])],10,ct))),128))])],2)):p("",!0),e("div",{class:G(["chat",{"hidden-mobile":g.value}])},[e("div",kt,[B(N).length>0?(s(),n("div",wt,[e("button",{title:"List of discussions",onClick:a[0]||(a[0]=t=>g.value=!0)},[(s(),n("svg",$t,[...a[8]||(a[8]=[e("path",{d:"M17.634 11.384a1.25 1.25 0 0 0-1.768-1.768l-7.5 7.5a1.25 1.25 0 0 0 0 1.768l7.5 7.5a1.25 1.25 0 0 0 1.768-1.768l-4.94-4.94a.25.25 0 0 1 .177-.426H26.75a1.25 1.25 0 1 0 0-2.5H12.871a.25.25 0 0 1-.177-.427l4.94-4.94z"},null,-1)])]))])])):p("",!0),c($e,{icon:$.value?.avatar||B(f).query.i,pseudo:$.value?.pseudo||B(f).query.p,friendID:$.value?.friend_id||r.value||"","without-border":""},null,8,["icon","pseudo","friendID"]),e("div",Ct,[c(m,{to:{name:"proposals",query:{id:r.value}},title:"Check common proposals"},{default:k(()=>[...a[9]||(a[9]=[e("img",{src:we,alt:"",height:"28"},null,-1)])]),_:1},8,["to"]),p("",!0)])]),e("div",St,[p("",!0),(s(!0),n(I,null,L(U.value,(t,d)=>(s(),n("div",{key:d,class:G(["message",{"message-sent":t.isFromMe,"message-error":t.from==="error"}]),title:"Message sent "+t.formattedSentDate+" and "+(t.read?"read "+B(Y)(t.read):"not read yet")},[t.images.length>0?(s(),n("div",Vt,[(s(!0),n(I,null,L(t.images,(C,q)=>(s(),T(ne,{key:q,card:C},null,8,["card"]))),128))])):p("",!0),e("p",null,b(t.message),1),e("div",It,[t.formattedReadDate?(s(),n("span",Rt,"sent ")):p("",!0),w(" "+b(t.formattedSentDate)+" ",1),t.formattedReadDate?(s(),n("span",Mt,"- seen "+b(t.formattedReadDate),1)):p("",!0)])],10,xt))),128))]),e("div",Ut,[H(e("input",{type:"text",placeholder:"Write a message...","onUpdate:modelValue":a[1]||(a[1]=t=>o.value=t),onKeypress:Ve(D,["enter"])},null,544),[[J,o.value]]),e("button",{class:"send",onClick:D,disabled:o.value.length<1},[...a[11]||(a[11]=[e("svg",{height:"20px",viewBox:"0 0 24 24",width:"20px"},[e("title",null,"Press enter to send"),e("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fill:"var(--active-color)"})],-1)])],8,Bt)])],2)]))}}}),Dt=R(At,[["__scopeId","data-v-2f25e7e0"]]),Ce="/images/icons/message.svg",Pt={key:0},Tt={style:{"margin-bottom":"2rem"}},Lt={class:"list"},zt={class:"cards"},Ft={class:"cards"},Et={class:"card-count"},Nt={class:"tile-footer"},Gt={key:0},Ht={class:"token-count"},qt=["onClick"],Ot={key:3},jt=A({__name:"ProposalsView",setup(i){const f=ie(),v=X(),r=S(),u=S(!0),o=S([]),g=S({raritySelection:[],languageSelection:[],pseudonymSelection:[],cardName:void 0}),$=V(()=>o.value),h=V(()=>$.value.map(t=>t.card1)),D=V(()=>ce($.value.map(t=>t.language))),M=V(()=>ce($.value.map(t=>t.pseudo))),x=t=>t.name.toLowerCase().includes((g.value.cardName||"").toLowerCase()),z=V(()=>$.value.reduce((t,d)=>{const C=d.card1.rarity,{friend_id:q,icon:E,pseudo:O,language:de,other_user_date:Se}=d;if(g.value.raritySelection.length&&!g.value.raritySelection.includes(C)||g.value.languageSelection.length&&!g.value.languageSelection.includes(de||"")||g.value.pseudonymSelection.length&&!g.value.pseudonymSelection.includes(O||"")||g.value.cardName&&!x(d.card1)&&!x(d.card2))return t;const W=t.find(j=>j.rarity===C&&j.friendID===q);return W?(W.wantedCards.every(j=>j.id!==d.card1.id)&&W.wantedCards.push(d.card1),W.givenCards.every(j=>j.id!==d.card2.id)&&W.givenCards.push(d.card2)):t.push({rarity:C,friendID:q,icon:E,pseudo:O,language:de,lastUpdate:Y(Se),wantedCards:[d.card1],givenCards:[d.card2]}),t},[])),U=t=>Be.value[t]||0,l=t=>Z.find(d=>d.id===t),_=t=>le[t].tradePrice,a=t=>{v.push({name:"message",params:{id:t.friendID},query:{i:t.icon,p:t.pseudo}})},y=()=>{window.location.reload()},m=async()=>{u.value=!0;try{const t=await pe(f.query.id);o.value=t.map(d=>({...d,card1:l(d.card_wanted),card2:l(d.card_to_give)}))}catch(t){r.value=t}u.value=!1};return ee(()=>f.query.id,m),he(m),(t,d)=>(s(),T(te,null,{default:k(()=>[u.value?(s(),n("h2",Pt,"Loading your proposals…")):r.value?(s(),n(I,{key:1},[e("h2",Tt,b(r.value),1),c(se,{onClick:y},{default:k(()=>[...d[1]||(d[1]=[w("Refresh",-1)])]),_:1})],64)):$.value.length>0?(s(),n(I,{key:2},[d[5]||(d[5]=e("h2",null,"You’ve got a match!",-1)),c(Le,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=C=>g.value=C),cards:h.value,languages:D.value,pseudonyms:M.value},null,8,["modelValue","cards","languages","pseudonyms"]),e("div",Lt,[(s(!0),n(I,null,L(z.value,(C,q)=>(s(),n("div",{class:"exchange-tile",key:q},[c($e,Ue({class:"tile-title"},{ref_for:!0},C),null,16),e("div",zt,[(s(!0),n(I,null,L(C.wantedCards,(E,O)=>(s(),n("div",{class:"card-container",key:O},[c(ne,{card:E},null,8,["card"])]))),128))]),d[4]||(d[4]=e("div",{class:"exchange-icon"},null,-1)),e("div",Ft,[(s(!0),n(I,null,L(C.givenCards,(E,O)=>(s(),n("div",{class:"card-container",key:O},[c(ne,{card:E},null,8,["card"]),e("span",Et,b(U(E.id)),1)]))),128))]),e("div",Nt,[C.language?(s(),n("div",Gt,b(C.language),1)):p("",!0),e("div",null,[d[2]||(d[2]=e("img",{src:ke,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",Ht,b(_(C.rarity)),1)]),e("div",{class:"clickable",onClick:E=>a(C)},[...d[3]||(d[3]=[e("img",{src:Ce,height:"20",alt:"Message"},null,-1)])],8,qt)])]))),128))])],64)):(s(),n("h2",Ot,[...d[6]||(d[6]=[w(" No matching proposals for now :( ",-1),e("br",null,null,-1),w(" Please come back later! ",-1)])]))]),_:1}))}}),Wt=R(jt,[["__scopeId","data-v-9b033f29"]]),Kt={key:0,class:"prices"},Yt={class:"rarity"},Jt=["src","alt","title"],Xt=A({__name:"PacksInformations",setup(i){const f=r=>r.reduce((u,o)=>{for(const g of o.packs||[])u[g||""]=(u[g||""]||0)+o.count;return u},{}),v=V(()=>Object.entries(f(ve.value)).sort((r,u)=>u[1]-r[1]));return(r,u)=>B(ve).length>0?(s(),n("div",Kt,[u[0]||(u[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(s(!0),n(I,null,L(v.value,([o,g])=>(s(),n("div",{class:"price",key:o},[e("div",Yt,[e("img",{src:`/images/packs/${o}.webp`,alt:o,height:"100px",title:o+" booster pack"},null,8,Jt)]),e("span",null,b(g)+" cards wanted inside",1)]))),128))])):p("",!0)}}),Zt=R(Xt,[["__scopeId","data-v-f29dc244"]]),Qt="/images/icons/grid.svg",es={},ts={class:"hr-or"};function ss(i,f){return s(),n("div",ts,[Q(i.$slots,"default",{},()=>[f[0]||(f[0]=w("OR",-1))])])}const as=R(es,[["render",ss],["__scopeId","data-v-e7568407"]]),os={key:0,class:"column-center"},ls={class:"form-group"},ns={key:0,class:"form-error"},is={class:"form-group"},rs={key:0,class:"form-error"},ds=5e3,us=!0,cs=A({__name:"GitHubStargazer",emits:["success"],setup(i,{emit:f}){const v=f,r=S(!1),u=S(!1),o=S(""),g=S(""),$=S([]),h=S(12),D=S(0),M=oe({accessCode:!1,ghUsername:!1}),x=async()=>(await(await fetch("https://api.github.com/repos/flibustier/pokemon-tcg-exchange/stargazers")).json()).map(t=>t.login),z=V(()=>g.value.toUpperCase()==="FRIEND"),U=async()=>{if($.value.includes(o.value)||z.value||h.value<=0){console.log("ACCESS GRANTED"),v("success",z.value?"":o.value);return}if(o.value.length>0&&!r.value&&D.value>0){u.value=!0;return}M.ghUsername=o.value.length>0,M.accessCode=g.value.length>0},l=()=>{u.value=!1},_=async()=>{const y=await x();u.value&&us&&h.value--,!(y.length===$.value.length&&h.value>0)&&(o.value===""&&(o.value=y.find(m=>!$.value.includes(m))||""),r.value=!0,$.value=y,clearInterval(D.value),U())},a=async()=>{$.value=await x(),D.value=setInterval(_,ds)};return _e(()=>{clearInterval(D.value)}),(y,m)=>u.value?(s(),n("div",os,[m[3]||(m[3]=e("img",{src:Qt,alt:"",height:"40"},null,-1)),m[4]||(m[4]=e("p",null,"Checking GitHub Stargazers, please wait… (this could take up to one minute)",-1)),c(se,{type:"button",role:"button",onClick:l},{default:k(()=>[...m[2]||(m[2]=[w(" Cancel ",-1)])]),_:1})])):(s(),n(I,{key:1},[m[10]||(m[10]=e("p",null," In order to access to the messaging feature and others beta features, you need to star the repository on GitHub : ",-1)),e("span",{class:"github-btn-large",onClick:a},[...m[5]||(m[5]=[e("a",{class:"gh-btn",href:"https://github.com/flibustier/pokemon-tcg-exchange",rel:"noopener noreferrer",target:"_blank","aria-label":"Star pokemon-tcg-exchange on GitHub"},[e("span",{class:"gh-ico","aria-hidden":"true"}),e("span",{class:"gh-text"},"Star")],-1)])]),e("div",ls,[m[7]||(m[7]=e("label",{for:"username",class:"form-label"},"Enter your GitHub username :",-1)),H(e("input",{"onUpdate:modelValue":m[0]||(m[0]=t=>o.value=t),type:"text",id:"username",class:"form-input"},null,512),[[J,o.value]]),M.ghUsername&&o.value.length>0?(s(),n("p",ns,[...m[6]||(m[6]=[w(" This username doesn’t seems to be a new stargazer, please retry in a few seconds or contact us at ",-1),e("a",{href:"mailto:help@pokemon-tcg.exchange?subject=Beta%20Access"},"help@pokemon-tcg.exchange",-1)])])):p("",!0)]),c(as),m[11]||(m[11]=e("p",null,[w(" If you got a code given by our team, you can enter it here ("),e("b",null,"you don’t need it if you have a GitHub account"),w(") : ")],-1)),e("div",is,[m[8]||(m[8]=e("label",{for:"accessCode",class:"form-label"},"Beta Access code",-1)),H(e("input",{"onUpdate:modelValue":m[1]||(m[1]=t=>g.value=t),type:"text",id:"accessCode",class:"form-input",autocapitalize:"characters"},null,512),[[J,g.value]]),M.accessCode?(s(),n("p",rs," This code is not recognized. Please try again. ")):p("",!0)]),c(se,{type:"submit",role:"button",disabled:o.value.length<1&&g.value.length<3,onClick:U},{default:k(()=>[...m[9]||(m[9]=[w(" Submit ",-1)])]),_:1},8,["disabled"])],64))}}),vs=R(cs,[["__scopeId","data-v-a3745c42"]]),ms={class:"form"},gs=A({__name:"BetaAccessForm",setup(i){const f=X(),v=async r=>{ye({...re(),has_beta_access:!0,github_username:r}),await be(),f.back()};return(r,u)=>(s(),n("div",ms,[u[0]||(u[0]=e("h2",null,"Access to Beta features",-1)),c(vs,{onSuccess:v})]))}}),fs=R(gs,[["__scopeId","data-v-a0aaca68"]]),ps={class:"toggle-container"},hs={class:"switch-label"},_s=["disabled"],ys={class:"switch-text"},bs=A({__name:"ToggleSwitch",props:me({disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const f=ge(i,"modelValue");return(v,r)=>(s(),n("div",ps,[e("label",hs,[H(e("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=u=>f.value=u),disabled:i.disabled,class:"switch-input"},null,8,_s),[[Ae,f.value]]),r[1]||(r[1]=e("span",{class:"switch-slider"},null,-1)),e("span",ys,[Q(v.$slots,"default",{},void 0)])])]))}}),P=R(bs,[["__scopeId","data-v-c0313374"]]),ks={class:"form-group"},ws=["src"],$s={key:0,class:"icon-list"},Cs=["onClick"],Ss=["src"],xs={class:"form-group"},Vs={class:"form-group"},Is={class:"form-group"},Rs=["value"],Ms={class:"form-group"},Us={class:"form-group"},Bs=65,As=A({__name:"SettingsForm",setup(i){const f=["ENG","SPA","FRA","GER","ITA","POR","JPN","KOR","CHT"],v=X(),{rarity_rules:r,...u}=re(),o=oe({pseudo:"",icon:"000",language:"",accept_notifications:!0,has_beta_access:!1,...u}),g=S(!1),$=S(!1),h=oe({C:!0,U:!0,R:!0,RR:!0,AR:!0,SR:!0,SAR:!0,S:!0,SSR:!0,...(r||[]).reduce((U,l)=>({...U,[l.rarity]:l.enabled===1}),{})});ee(()=>[o,h],()=>{$.value=!1},{deep:!0});const D=V(()=>`/images/avatars/${o.icon||"000"}.png`),M=U=>{o.icon=String(U).padStart(3,"0"),g.value=!1},x=()=>{v.push({name:"beta"})},z=async()=>{ye({...o,rarity_rules:Object.entries(h).map(([U,l])=>({rarity:U,enabled:l?1:0}))}),$.value=await be()||!1};return(U,l)=>{const _=ae("RouterLink");return s(),n("form",{class:"friend-form",onSubmit:fe(z,["prevent"])},[l[23]||(l[23]=e("h2",null,"Settings",-1)),e("div",ks,[l[14]||(l[14]=e("label",{for:"icon",class:"form-label label-center"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:l[0]||(l[0]=a=>g.value=!g.value)},[e("img",{src:D.value,alt:"Selected Icon",id:"icon"},null,8,ws)]),g.value?(s(),n("div",$s,[(s(),n(I,null,L(Bs,a=>e("div",{key:a,class:"icon-item",onClick:y=>M(a)},[e("img",{src:`/images/avatars/${String(a).padStart(3,"0")}.png`,alt:"Icon"},null,8,Ss)],8,Cs)),64))])):p("",!0)]),e("div",xs,[l[15]||(l[15]=e("label",{for:"friendId",class:"form-label"},"Friend ID",-1)),H(e("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>o.friend_id=a),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16",disabled:!0},null,512),[[J,o.friend_id]])]),e("div",Vs,[l[16]||(l[16]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),H(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>o.pseudo=a),type:"text",id:"pseudo",class:"friend-id",maxlength:"14",required:""},null,512),[[J,o.pseudo]])]),e("div",Is,[l[18]||(l[18]=e("label",{for:"language-input",class:"form-label"},"Your card’s language",-1)),H(e("select",{id:"language-input","onUpdate:modelValue":l[3]||(l[3]=a=>o.language=a),class:"language-input",required:""},[l[17]||(l[17]=e("option",{value:""},"Please select",-1)),(s(),n(I,null,L(f,a=>e("option",{key:a,value:a},b(a),9,Rs)),64))],512),[[De,o.language]])]),e("div",Ms,[l[19]||(l[19]=e("label",{class:"form-label"},"Accept exchange of rarity:",-1)),c(P,{modelValue:h.C,"onUpdate:modelValue":l[4]||(l[4]=a=>h.C=a)},{default:k(()=>[c(F,{rarity:"C"})]),_:1},8,["modelValue"]),c(P,{modelValue:h.U,"onUpdate:modelValue":l[5]||(l[5]=a=>h.U=a)},{default:k(()=>[c(F,{rarity:"U"})]),_:1},8,["modelValue"]),c(P,{modelValue:h.R,"onUpdate:modelValue":l[6]||(l[6]=a=>h.R=a)},{default:k(()=>[c(F,{rarity:"R"})]),_:1},8,["modelValue"]),c(P,{modelValue:h.RR,"onUpdate:modelValue":l[7]||(l[7]=a=>h.RR=a)},{default:k(()=>[c(F,{rarity:"RR"})]),_:1},8,["modelValue"]),c(P,{modelValue:h.AR,"onUpdate:modelValue":l[8]||(l[8]=a=>h.AR=a)},{default:k(()=>[c(F,{rarity:"AR"})]),_:1},8,["modelValue"]),c(P,{modelValue:h.SR,"onUpdate:modelValue":[l[9]||(l[9]=a=>h.SR=a),l[10]||(l[10]=a=>h.SAR=a)]},{default:k(()=>[c(F,{rarity:"SR"})]),_:1},8,["modelValue"]),c(P,{modelValue:h.S,"onUpdate:modelValue":l[11]||(l[11]=a=>h.S=a)},{default:k(()=>[c(F,{rarity:"S"})]),_:1},8,["modelValue"]),c(P,{modelValue:h.SSR,"onUpdate:modelValue":l[12]||(l[12]=a=>h.SSR=a)},{default:k(()=>[c(F,{rarity:"SSR"})]),_:1},8,["modelValue"])]),e("div",Us,[c(P,{modelValue:o.accept_notifications,"onUpdate:modelValue":l[13]||(l[13]=a=>o.accept_notifications=a)},{default:k(()=>[...l[20]||(l[20]=[w(" Email notifications ",-1)])]),_:1},8,["modelValue"]),c(P,{"model-value":o.has_beta_access,disabled:o.has_beta_access,"onUpdate:modelValue":x},{default:k(()=>[...l[21]||(l[21]=[w(" Access beta features (messages, …) ",-1)])]),_:1},8,["model-value","disabled"])]),c(se,{type:"submit",role:"button",disabled:$.value},{default:k(()=>[w(b($.value?"Saved!":"Save"),1)]),_:1},8,["disabled"]),c(_,{to:"/logout",class:"danger"},{default:k(()=>[...l[22]||(l[22]=[w("Logout",-1)])]),_:1})],32)}}}),Ds=R(As,[["__scopeId","data-v-4a76d791"]]),Ps=["disabled"],Ts={class:"icon"},Ls={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},zs={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Fs={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Es={key:3,src:we,width:"32",height:"32"},Ns={key:4,src:Ce,width:"38",height:"38"},Gs={class:"label"},Hs=A({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean},disabled:{type:Boolean},withNotificationDot:{type:Boolean}},setup(i){const f=X(),v=i,r=()=>f.push({name:v.label.toLowerCase()});return(u,o)=>(s(),n("button",{class:G(["portfolio-btn",{active:i.active}]),disabled:i.disabled??!1,onClick:r},[e("span",{class:G({"notification-dot":i.withNotificationDot})},null,2),e("span",Ts,[i.icon==="portfolio"?(s(),n("svg",Ls,[...o[0]||(o[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)])])):i.icon==="heart"?(s(),n("svg",zs,[...o[1]||(o[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)])])):i.icon==="gear"?(s(),n("svg",Fs,[...o[2]||(o[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)])])):p("",!0),i.icon==="exchange"?(s(),n("img",Es)):p("",!0),i.icon==="message"?(s(),n("img",Ns)):p("",!0)]),e("span",Gs,b(i.label),1)],10,Ps))}}),K=R(Hs,[["__scopeId","data-v-96a76908"]]),qs={class:"aside"},Os={class:"content"},js={class:"row-xl"},Ws=A({__name:"AccountView",setup(i){const f=ie(),v=V(()=>f.name),r=V(()=>["wishlist","offers"].includes(v.value??""));return(u,o)=>(s(),n("main",null,[e("div",qs,[e("nav",null,[c(K,{label:"Wishlist",icon:"heart",active:v.value==="wishlist"},null,8,["active"]),c(K,{label:"Offers",icon:"portfolio",active:v.value==="offers"},null,8,["active"]),c(K,{label:"Proposals",icon:"exchange",active:v.value==="proposals"},null,8,["active"]),c(K,{label:"Messages",icon:"message",active:v.value.startsWith("message"),"with-notification-dot":B(Pe)},null,8,["active","with-notification-dot"]),c(K,{label:"Account",icon:"gear",active:v.value==="account","with-notification-dot":B(Te)},null,8,["active","with-notification-dot"])]),r.value?(s(),T(ze,{key:0,id:"prices",showGiving:v.value==="offers"},null,8,["showGiving"])):p("",!0)]),e("div",Os,[r.value?(s(),T(Fe,{key:0,step:v.value==="wishlist"?1:2},null,8,["step"])):p("",!0),v.value==="proposals"?(s(),T(Wt,{key:1})):p("",!0),v.value==="account"?(s(),T(te,{key:2},{default:k(()=>[e("div",js,[c(Ds),c(Zt)])]),_:1})):p("",!0),v.value==="beta"?(s(),T(te,{key:3},{default:k(()=>[c(fs)]),_:1})):p("",!0),v.value.startsWith("message")?(s(),T(Dt,{key:4})):p("",!0)])]))}}),Zs=R(Ws,[["__scopeId","data-v-af6332ec"]]);export{Zs as default};
