import{d as w,g as L,c as l,o as n,n as E,a as e,h as p,t as g,_ as $,i as H,j as S,v as z,k as W,l as q,m as D,p as J,r as P,q as K,x as A,y as Y,b as v,z as F,F as h,A as b,w as _,B as V,C as Q,e as U,P as O,D as X,E as Z,G as ee,H as te,f as R,I as se,J as ae,K as ne,M as G,N as oe,O as le,Q as ie,R as re}from"./app-KIfw994M.js";import{C as j}from"./CenteredLayout-Bx0WFUK_.js";const de="/images/icons/exchange.svg",ue={class:"icon"},ce={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},ve={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},me={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},pe={key:3,src:de,width:"32",height:"32"},fe={class:"label"},_e=w({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean}},setup(y){const m=L(),d=y,o=()=>m.push({name:d.label.toLowerCase()});return(i,r)=>(n(),l("button",{class:E(["portfolio-btn",{active:i.active}]),onClick:o},[e("span",ue,[i.icon==="portfolio"?(n(),l("svg",ce,r[0]||(r[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):i.icon==="heart"?(n(),l("svg",ve,r[1]||(r[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):i.icon==="gear"?(n(),l("svg",me,r[2]||(r[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):p("",!0),i.icon==="exchange"?(n(),l("img",pe)):p("",!0)]),e("span",fe,g(i.label),1)],2))}}),B=$(_e,[["__scopeId","data-v-b8091c95"]]),ge={class:"toggle-container"},he={class:"switch-label"},ye={class:"switch-text"},ke=w({__name:"ToggleSwitch",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(y){const m=H(y,"modelValue");return(d,o)=>(n(),l("div",ge,[e("label",he,[S(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=i=>m.value=i),class:"switch-input"},null,512),[[z,m.value]]),o[1]||(o[1]=e("span",{class:"switch-slider"},null,-1)),e("span",ye,[W(d.$slots,"default",{},void 0)])])]))}}),I=$(ke,[["__scopeId","data-v-823dee4c"]]),be={class:"form-group"},we={class:"form-group"},$e={class:"form-group"},Ce=["src"],xe={key:0,class:"icon-list"},Ve=["onClick"],Ie=["src"],Re={class:"form-group"},Pe={class:"form-group"},Ae=["value"],Be=w({__name:"SettingsForm",setup(y){const{rarity_rules:m,...d}=q(),o=D({pseudo:"",icon:"000",language:"",accept_notifications:!0,...d,friend_id:J()}),i=P(!1),r=P(!1),u=D({C:!0,U:!0,R:!0,RR:!0,AR:!0,...(m||[]).reduce((s,t)=>({...s,[t.rarity]:t.enabled===1}),{})}),M=["ENG","SPA","FRA","GER","ITA","POR","JPN","KOR","CHT"];K(()=>[o,u],()=>{r.value=!1},{deep:!0});const N=A(()=>`/images/avatars/${o.icon||"000"}.png`),T=s=>{o.icon=String(s).padStart(3,"0"),i.value=!1},c=async()=>{X({...o,rarity_rules:Object.entries(u).map(([s,t])=>({rarity:s,enabled:t?1:0}))}),r.value=await Z()||!1};return(s,t)=>(n(),l("form",{class:"friend-form",onSubmit:Y(c,["prevent"])},[t[16]||(t[16]=e("h2",null,"Settings",-1)),e("div",be,[t[10]||(t[10]=e("label",{for:"friendId",class:"form-label"},'Friend ID (16 digits without "-")',-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.friend_id=a),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16"},null,512),[[F,o.friend_id]])]),e("div",we,[t[11]||(t[11]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),S(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.pseudo=a),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[F,o.pseudo]])]),e("div",$e,[t[12]||(t[12]=e("label",{for:"icon",class:"form-label"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:t[2]||(t[2]=a=>i.value=!i.value)},[e("img",{src:N.value,alt:"Selected Icon",id:"icon"},null,8,Ce)]),i.value?(n(),l("div",xe,[(n(),l(h,null,b(40,a=>e("div",{key:a,class:"icon-item",onClick:f=>T(a)},[e("img",{src:`/images/avatars/${String(a).padStart(3,"0")}.png`,alt:"Icon"},null,8,Ie)],8,Ve)),64))])):p("",!0)]),e("div",Re,[t[13]||(t[13]=e("label",{class:"form-label"},"Accept exchange of rarity:",-1)),v(I,{modelValue:u.C,"onUpdate:modelValue":t[3]||(t[3]=a=>u.C=a)},{default:_(()=>[v(V,{rarity:"C"})]),_:1},8,["modelValue"]),v(I,{modelValue:u.U,"onUpdate:modelValue":t[4]||(t[4]=a=>u.U=a)},{default:_(()=>[v(V,{rarity:"U"})]),_:1},8,["modelValue"]),v(I,{modelValue:u.R,"onUpdate:modelValue":t[5]||(t[5]=a=>u.R=a)},{default:_(()=>[v(V,{rarity:"R"})]),_:1},8,["modelValue"]),v(I,{modelValue:u.RR,"onUpdate:modelValue":t[6]||(t[6]=a=>u.RR=a)},{default:_(()=>[v(V,{rarity:"RR"})]),_:1},8,["modelValue"]),v(I,{modelValue:u.AR,"onUpdate:modelValue":t[7]||(t[7]=a=>u.AR=a)},{default:_(()=>[v(V,{rarity:"AR"})]),_:1},8,["modelValue"])]),p("",!0),e("div",Pe,[t[15]||(t[15]=e("label",{for:"language-input",class:"form-label"},"Your card’s language",-1)),S(e("select",{id:"language-input","onUpdate:modelValue":t[9]||(t[9]=a=>o.language=a),class:"language-input"},[t[14]||(t[14]=e("option",{value:""},"Please select",-1)),(n(),l(h,null,b(M,a=>e("option",{key:a,value:a},g(a),9,Ae)),64))],512),[[Q,o.language]])]),v(O,{type:"submit",role:"button",disabled:r.value},{default:_(()=>[U(g(r.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),Se=$(Be,[["__scopeId","data-v-461b136b"]]),Ue={key:0},Me={style:{"margin-bottom":"2rem"}},Ne={class:"list"},Te={class:"tile-title"},De=["src"],Fe={key:0},Ge={class:"cards"},Oe=["src","alt"],je={class:"cards"},Le=["src","alt"],Ee={class:"card-count"},He={class:"tile-footer"},ze={class:"token-count"},We={key:3},qe=w({__name:"ProposalsView",setup(y){const m=P([]),d=P(!0),o=P(),i=A(()=>m.value.reduce((c,s)=>{const t=s.card1.rarityCode,{friend_id:a,icon:f,pseudo:C}=s,x=c.find(k=>k.rarity===t&&k.friendID===a);return x?(x.wantedCards.every(k=>k.id!==s.card1.id)&&x.wantedCards.push(s.card1),x.givenCards.every(k=>k.id!==s.card2.id)&&x.givenCards.push(s.card2)):c.push({rarity:t,friendID:a,icon:f,pseudo:C,wantedCards:[s.card1],givenCards:[s.card2]}),c},[])),r=c=>se.value[c]||0,u=c=>{const[s,t]=c.split("-");return{id:c,...ne.find(a=>a.set===s&&a.number===parseInt(t))}},M=c=>c.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"),N=c=>{switch(c){case"R":return 120;case"RR":return 500;case"AR":return 400}return 0},T=()=>{window.location.reload()};return ee(async()=>{d.value=!0;try{const c=await te();m.value=c.map(s=>({...s,card1:u(s.card_wanted),card2:u(s.card_to_give)}))}catch(c){o.value=c}d.value=!1}),(c,s)=>(n(),R(j,{style:{padding:"2rem 0"}},{default:_(()=>[d.value?(n(),l("h2",Ue,"Loading your proposals…")):o.value?(n(),l(h,{key:1},[e("h2",Me,g(o.value),1),v(O,{onClick:T},{default:_(()=>s[0]||(s[0]=[U("Refresh")])),_:1,__:[0]})],64)):m.value.length>0?(n(),l(h,{key:2},[s[3]||(s[3]=e("h2",null,"You’ve got a match!",-1)),e("div",Ne,[(n(!0),l(h,null,b(i.value,(t,a)=>(n(),l("div",{class:"exchange-tile",key:a},[e("div",Te,[t.icon&&t.icon!=="000"?(n(),l("img",{key:0,src:`/images/avatars/${t.icon}.png`,height:"40px",alt:""},null,8,De)):p("",!0),e("div",null,[t.pseudo?(n(),l("div",Fe,g(t.pseudo),1)):p("",!0),e("div",null,"ID "+g(M(t.friendID)),1)])]),e("div",Ge,[(n(!0),l(h,null,b(t.wantedCards,(f,C)=>(n(),l("div",{class:"card-container",key:C},[e("img",{src:`/images/cards/thumbnails/${f.imageName}`,alt:f.label.eng,class:"card-image"},null,8,Oe)]))),128))]),s[2]||(s[2]=e("div",{class:"exchange-icon"},null,-1)),e("div",je,[(n(!0),l(h,null,b(t.givenCards,(f,C)=>(n(),l("div",{class:"card-container",key:C},[e("img",{src:`/images/cards/thumbnails/${f.imageName}`,alt:f.label.eng,class:"card-image"},null,8,Le),e("span",Ee,g(r(f.id)),1)]))),128))]),e("div",He,[s[1]||(s[1]=e("img",{src:ae,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",ze,g(N(t.rarity)),1)])]))),128))])],64)):(n(),l("h2",We,s[4]||(s[4]=[U(" No matching proposals for now :( "),e("br",null,null,-1),U(" Please come back later! ")])))]),_:1}))}}),Je=$(qe,[["__scopeId","data-v-7b3db3d9"]]),Ke={key:0,class:"prices"},Ye={class:"rarity"},Qe=["src","alt","title"],Xe=w({__name:"PacksInformations",setup(y){const m=o=>o.reduce((i,r)=>{for(const u of r.packs||[])i[u||""]=(i[u||""]||0)+r.count;return i},{}),d=A(()=>Object.entries(m(G.value)).sort((o,i)=>i[1]-o[1]));return(o,i)=>oe(G).length>0?(n(),l("div",Ke,[i[0]||(i[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(n(!0),l(h,null,b(d.value,([r,u])=>(n(),l("div",{class:"price",key:r},[e("div",Ye,[e("img",{src:`/images/packs/${r}.webp`,alt:r,height:"100px",title:r+" booster pack"},null,8,Qe)]),e("span",null,g(u)+" cards wanted inside",1)]))),128))])):p("",!0)}}),Ze=$(Xe,[["__scopeId","data-v-f29dc244"]]),et={class:"aside"},tt={class:"content"},st={class:"row-xl"},at=w({__name:"AccountView",setup(y){const m=le(),d=A(()=>m.name),o=A(()=>["wishlist","offers"].includes(d.value??""));return(i,r)=>(n(),l("main",null,[e("div",et,[e("nav",null,[v(B,{label:"Wishlist",icon:"heart",active:d.value==="wishlist"},null,8,["active"]),v(B,{label:"Offers",icon:"portfolio",active:d.value==="offers"},null,8,["active"]),v(B,{label:"Proposals",icon:"exchange",active:d.value==="proposals"},null,8,["active"]),v(B,{label:"Account",icon:"gear",active:d.value==="account"},null,8,["active"])]),o.value?(n(),R(ie,{key:0,id:"prices",showGiving:d.value==="offers"},null,8,["showGiving"])):p("",!0)]),e("div",tt,[o.value?(n(),R(re,{key:0,step:d.value==="wishlist"?1:2},null,8,["step"])):p("",!0),d.value==="proposals"?(n(),R(Je,{key:1})):p("",!0),d.value==="account"?(n(),R(j,{key:2},{default:_(()=>[e("div",st,[v(Se),v(Ze)])]),_:1})):p("",!0)])]))}}),lt=$(at,[["__scopeId","data-v-1474198b"]]);export{lt as default};
