import{d as w,g as E,c as l,o as n,n as H,a as e,h as p,t as f,_ as $,i as z,j as U,v as W,k as q,l as J,m as D,p as K,r as A,q as Y,x as B,y as Q,b as v,z as F,F as h,A as b,w as g,B as V,C as X,e as R,P as O,D as Z,E as ee,G as te,H as se,f as P,I as ae,J as ne,K as oe,M as G,N as le,O as ie,Q as re,R as de}from"./app-CgdTJcB4.js";import{C as j}from"./CenteredLayout-CSSBwuw7.js";const ue="/images/icons/exchange.svg",ce={class:"icon"},ve={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},me={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},pe={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},fe={key:3,src:ue,width:"32",height:"32"},_e={class:"label"},ge=w({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean}},setup(y){const m=E(),d=y,o=()=>m.push({name:d.label.toLowerCase()});return(i,r)=>(n(),l("button",{class:H(["portfolio-btn",{active:i.active}]),onClick:o},[e("span",ce,[i.icon==="portfolio"?(n(),l("svg",ve,r[0]||(r[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):i.icon==="heart"?(n(),l("svg",me,r[1]||(r[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):i.icon==="gear"?(n(),l("svg",pe,r[2]||(r[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):p("",!0),i.icon==="exchange"?(n(),l("img",fe)):p("",!0)]),e("span",_e,f(i.label),1)],2))}}),S=$(ge,[["__scopeId","data-v-b8091c95"]]),he={class:"toggle-container"},ye={class:"switch-label"},ke={class:"switch-text"},be=w({__name:"ToggleSwitch",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(y){const m=z(y,"modelValue");return(d,o)=>(n(),l("div",he,[e("label",ye,[U(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=i=>m.value=i),class:"switch-input"},null,512),[[W,m.value]]),o[1]||(o[1]=e("span",{class:"switch-slider"},null,-1)),e("span",ke,[q(d.$slots,"default",{},void 0)])])]))}}),I=$(be,[["__scopeId","data-v-823dee4c"]]),we={class:"form-group"},$e={class:"form-group"},Ce={class:"form-group"},xe=["src"],Ve={key:0,class:"icon-list"},Ie=["onClick"],Re=["src"],Pe={class:"form-group"},Ae={class:"form-group"},Be=["value"],Se=w({__name:"SettingsForm",setup(y){const{rarity_rules:m,...d}=J(),o=D({pseudo:"",icon:"000",language:"",accept_notifications:!0,...d,friend_id:K()}),i=A(!1),r=A(!1),u=D({C:!0,U:!0,R:!0,RR:!0,AR:!0,...(m||[]).reduce((s,t)=>({...s,[t.rarity]:t.enabled===1}),{})}),M=["ENG","SPA","FRA","GER","ITA","POR","JPN","KOR","CHT"];Y(()=>[o,u],()=>{r.value=!1},{deep:!0});const N=B(()=>`/images/avatars/${o.icon||"000"}.png`),T=s=>{o.icon=String(s).padStart(3,"0"),i.value=!1},c=async()=>{Z({...o,rarity_rules:Object.entries(u).map(([s,t])=>({rarity:s,enabled:t?1:0}))}),r.value=await ee()||!1};return(s,t)=>(n(),l("form",{class:"friend-form",onSubmit:Q(c,["prevent"])},[t[16]||(t[16]=e("h2",null,"Settings",-1)),e("div",we,[t[10]||(t[10]=e("label",{for:"friendId",class:"form-label"},'Friend ID (16 digits without "-")',-1)),U(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.friend_id=a),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16"},null,512),[[F,o.friend_id]])]),e("div",$e,[t[11]||(t[11]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),U(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.pseudo=a),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[F,o.pseudo]])]),e("div",Ce,[t[12]||(t[12]=e("label",{for:"icon",class:"form-label"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:t[2]||(t[2]=a=>i.value=!i.value)},[e("img",{src:N.value,alt:"Selected Icon",id:"icon"},null,8,xe)]),i.value?(n(),l("div",Ve,[(n(),l(h,null,b(40,a=>e("div",{key:a,class:"icon-item",onClick:_=>T(a)},[e("img",{src:`/images/avatars/${String(a).padStart(3,"0")}.png`,alt:"Icon"},null,8,Re)],8,Ie)),64))])):p("",!0)]),e("div",Pe,[t[13]||(t[13]=e("label",{class:"form-label"},"Accept exchange of rarity:",-1)),v(I,{modelValue:u.C,"onUpdate:modelValue":t[3]||(t[3]=a=>u.C=a)},{default:g(()=>[v(V,{rarity:"C"})]),_:1},8,["modelValue"]),v(I,{modelValue:u.U,"onUpdate:modelValue":t[4]||(t[4]=a=>u.U=a)},{default:g(()=>[v(V,{rarity:"U"})]),_:1},8,["modelValue"]),v(I,{modelValue:u.R,"onUpdate:modelValue":t[5]||(t[5]=a=>u.R=a)},{default:g(()=>[v(V,{rarity:"R"})]),_:1},8,["modelValue"]),v(I,{modelValue:u.RR,"onUpdate:modelValue":t[6]||(t[6]=a=>u.RR=a)},{default:g(()=>[v(V,{rarity:"RR"})]),_:1},8,["modelValue"]),v(I,{modelValue:u.AR,"onUpdate:modelValue":t[7]||(t[7]=a=>u.AR=a)},{default:g(()=>[v(V,{rarity:"AR"})]),_:1},8,["modelValue"])]),p("",!0),e("div",Ae,[t[15]||(t[15]=e("label",{for:"language-input",class:"form-label"},"Your card’s language",-1)),U(e("select",{id:"language-input","onUpdate:modelValue":t[9]||(t[9]=a=>o.language=a),class:"language-input"},[t[14]||(t[14]=e("option",{value:""},"Please select",-1)),(n(),l(h,null,b(M,a=>e("option",{key:a,value:a},f(a),9,Be)),64))],512),[[X,o.language]])]),v(O,{type:"submit",role:"button",disabled:r.value},{default:g(()=>[R(f(r.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),Ue=$(Se,[["__scopeId","data-v-461b136b"]]),Me={key:0},Ne={style:{"margin-bottom":"2rem"}},Te={class:"list"},De={class:"tile-title"},Fe=["src"],Ge={key:0},Oe={class:"cards"},je=["src","alt"],Le={class:"cards"},Ee=["src","alt"],He={class:"card-count"},ze={class:"tile-footer"},We={class:"token-count"},qe={key:3},Je=w({__name:"ProposalsView",setup(y){const m=A([]),d=A(!0),o=A(),i=B(()=>m.value.reduce((c,s)=>{const t=s.card1.rarityCode,{friend_id:a,icon:_,pseudo:C,language:L}=s,x=c.find(k=>k.rarity===t&&k.friendID===a);return x?(x.wantedCards.every(k=>k.id!==s.card1.id)&&x.wantedCards.push(s.card1),x.givenCards.every(k=>k.id!==s.card2.id)&&x.givenCards.push(s.card2)):c.push({rarity:t,friendID:a,icon:_,pseudo:C,language:L,wantedCards:[s.card1],givenCards:[s.card2]}),c},[])),r=c=>ae.value[c]||0,u=c=>{const[s,t]=c.split("-");return{id:c,...oe.find(a=>a.set===s&&a.number===parseInt(t))}},M=c=>c.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"),N=c=>{switch(c){case"R":return 120;case"RR":return 500;case"AR":return 400}return 0},T=()=>{window.location.reload()};return te(async()=>{d.value=!0;try{const c=await se();m.value=c.map(s=>({...s,card1:u(s.card_wanted),card2:u(s.card_to_give)}))}catch(c){o.value=c}d.value=!1}),(c,s)=>(n(),P(j,{style:{padding:"2rem 0"}},{default:g(()=>[d.value?(n(),l("h2",Me,"Loading your proposals…")):o.value?(n(),l(h,{key:1},[e("h2",Ne,f(o.value),1),v(O,{onClick:T},{default:g(()=>s[0]||(s[0]=[R("Refresh")])),_:1,__:[0]})],64)):m.value.length>0?(n(),l(h,{key:2},[s[3]||(s[3]=e("h2",null,"You’ve got a match!",-1)),e("div",Te,[(n(!0),l(h,null,b(i.value,(t,a)=>(n(),l("div",{class:"exchange-tile",key:a},[e("div",De,[t.icon&&t.icon!=="000"?(n(),l("img",{key:0,src:`/images/avatars/${t.icon}.png`,height:"40px",alt:""},null,8,Fe)):p("",!0),e("div",null,[t.pseudo?(n(),l("div",Ge,f(t.pseudo),1)):p("",!0),e("div",null,"ID "+f(M(t.friendID)),1)])]),e("div",Oe,[(n(!0),l(h,null,b(t.wantedCards,(_,C)=>(n(),l("div",{class:"card-container",key:C},[e("img",{src:`/images/cards/thumbnails/${_.imageName}`,alt:_.label.eng,class:"card-image"},null,8,je)]))),128))]),s[2]||(s[2]=e("div",{class:"exchange-icon"},null,-1)),e("div",Le,[(n(!0),l(h,null,b(t.givenCards,(_,C)=>(n(),l("div",{class:"card-container",key:C},[e("img",{src:`/images/cards/thumbnails/${_.imageName}`,alt:_.label.eng,class:"card-image"},null,8,Ee),e("span",He,f(r(_.id)),1)]))),128))]),e("div",ze,[R(f(t.language)+" ",1),s[1]||(s[1]=e("img",{src:ne,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",We,f(N(t.rarity)),1)])]))),128))])],64)):(n(),l("h2",qe,s[4]||(s[4]=[R(" No matching proposals for now :( "),e("br",null,null,-1),R(" Please come back later! ")])))]),_:1}))}}),Ke=$(Je,[["__scopeId","data-v-50d8bf70"]]),Ye={key:0,class:"prices"},Qe={class:"rarity"},Xe=["src","alt","title"],Ze=w({__name:"PacksInformations",setup(y){const m=o=>o.reduce((i,r)=>{for(const u of r.packs||[])i[u||""]=(i[u||""]||0)+r.count;return i},{}),d=B(()=>Object.entries(m(G.value)).sort((o,i)=>i[1]-o[1]));return(o,i)=>le(G).length>0?(n(),l("div",Ye,[i[0]||(i[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(n(!0),l(h,null,b(d.value,([r,u])=>(n(),l("div",{class:"price",key:r},[e("div",Qe,[e("img",{src:`/images/packs/${r}.webp`,alt:r,height:"100px",title:r+" booster pack"},null,8,Xe)]),e("span",null,f(u)+" cards wanted inside",1)]))),128))])):p("",!0)}}),et=$(Ze,[["__scopeId","data-v-f29dc244"]]),tt={class:"aside"},st={class:"content"},at={class:"row-xl"},nt=w({__name:"AccountView",setup(y){const m=ie(),d=B(()=>m.name),o=B(()=>["wishlist","offers"].includes(d.value??""));return(i,r)=>(n(),l("main",null,[e("div",tt,[e("nav",null,[v(S,{label:"Wishlist",icon:"heart",active:d.value==="wishlist"},null,8,["active"]),v(S,{label:"Offers",icon:"portfolio",active:d.value==="offers"},null,8,["active"]),v(S,{label:"Proposals",icon:"exchange",active:d.value==="proposals"},null,8,["active"]),v(S,{label:"Account",icon:"gear",active:d.value==="account"},null,8,["active"])]),o.value?(n(),P(re,{key:0,id:"prices",showGiving:d.value==="offers"},null,8,["showGiving"])):p("",!0)]),e("div",st,[o.value?(n(),P(de,{key:0,step:d.value==="wishlist"?1:2},null,8,["step"])):p("",!0),d.value==="proposals"?(n(),P(Ke,{key:1})):p("",!0),d.value==="account"?(n(),P(j,{key:2},{default:g(()=>[e("div",at,[v(Ue),v(et)])]),_:1})):p("",!0)])]))}}),it=$(nt,[["__scopeId","data-v-1474198b"]]);export{it as default};
