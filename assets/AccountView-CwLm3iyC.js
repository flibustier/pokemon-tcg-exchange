import{d as I,c as n,u as G,n as T,a as e,f as m,t as y,o as s,_ as B,g as U,h as L,i as j,r as $,w as z,j as x,k as H,b as p,l as D,v as F,F as k,m as C,P as M,p as A,e as V,q as W,x as q,y as E,z as O,A as b,B as J,C as Y,D as K,E as R,G as Q,H as X,I as Z,J as ee}from"./index-CbJVxcO9.js";import{C as N}from"./CenteredLayout-S6QMU1Dv.js";const se="/images/icons/exchange.svg",te={class:"icon"},ae={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},ne={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},oe={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ie={key:3,src:se,width:"32",height:"32"},re={class:"label"},le=I({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean}},setup(w){const i=G(),a=w,l=()=>i.push({name:a.label.toLowerCase()});return(r,o)=>(s(),n("button",{class:T(["portfolio-btn",{active:r.active}]),onClick:l},[e("span",te,[r.icon==="portfolio"?(s(),n("svg",ae,o[0]||(o[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):r.icon==="heart"?(s(),n("svg",ne,o[1]||(o[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):r.icon==="gear"?(s(),n("svg",oe,o[2]||(o[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):m("",!0),r.icon==="exchange"?(s(),n("img",ie)):m("",!0)]),e("span",re,y(r.label),1)],2))}}),S=B(le,[["__scopeId","data-v-b8091c95"]]),de={class:"form-group"},ce={class:"form-group"},ue={class:"form-group"},ve=["src"],_e={key:0,class:"icon-list"},fe=["onClick"],he=["src"],pe=I({__name:"SettingsForm",setup(w){const i=U({pseudo:"",icon:"000",...j(),friend_id:L()}),a=$(!1),l=$(!1);z(()=>[i.friend_id,i.pseudo,i.icon],()=>{l.value=!1});const r=x(()=>`/images/avatars/${i.icon||"000"}.png`),o=P=>{i.icon=String(P).padStart(3,"0"),a.value=!1},f=async()=>{W(i),l.value=await q()||!1};return(P,c)=>(s(),n("form",{class:"friend-form",onSubmit:H(f,["prevent"])},[e("div",de,[c[3]||(c[3]=e("label",{for:"friendId",class:"form-label"},'Friend ID (16 digits without "-")',-1)),D(e("input",{"onUpdate:modelValue":c[0]||(c[0]=v=>i.friend_id=v),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16"},null,512),[[F,i.friend_id]])]),e("div",ce,[c[4]||(c[4]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),D(e("input",{"onUpdate:modelValue":c[1]||(c[1]=v=>i.pseudo=v),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[F,i.pseudo]])]),e("div",ue,[c[5]||(c[5]=e("label",{for:"icon",class:"form-label"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:c[2]||(c[2]=v=>a.value=!a.value)},[e("img",{src:r.value,alt:"Selected Icon",id:"icon"},null,8,ve)]),a.value?(s(),n("div",_e,[(s(),n(k,null,C(35,v=>e("div",{key:v,class:"icon-item",onClick:d=>o(v)},[e("img",{src:`/images/avatars/${String(v).padStart(3,"0")}.png`,alt:"Icon"},null,8,he)],8,fe)),64))])):m("",!0)]),p(M,{type:"submit",role:"button",disabled:l.value},{default:A(()=>[V(y(l.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),me=B(pe,[["__scopeId","data-v-f88e77d3"]]),ge={key:0},ke={style:{"margin-bottom":"2rem"}},ye={class:"list"},we={class:"tile-title"},be={class:"cards"},$e=["src","alt"],Ce={class:"cards"},xe=["src","alt"],Ie={class:"card-count"},Be={class:"tile-footer"},Pe={class:"token-count"},Se={key:3},Ve=I({__name:"ProposalsView",setup(w){const i=$([]),a=$(!0),l=$(),r=x(()=>i.value.reduce((d,t)=>{const h=t.card1.rarityCode,g=t.friend_id,u=d.find(_=>_.rarity===h&&_.friendID===g);return u?(u.wantedCards.every(_=>_.id!==t.card1.id)&&u.wantedCards.push(t.card1),u.givenCards.every(_=>_.id!==t.card2.id)&&u.givenCards.push(t.card2)):d.push({rarity:h,friendID:g,wantedCards:[t.card1],givenCards:[t.card2]}),d},[])),o=d=>J.value[d]||0,f=d=>{const[t,h]=d.split("-");return{id:d,...K.find(g=>g.set===t&&g.number===parseInt(h))}},P=d=>d.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"),c=d=>{switch(d){case"R":return 120;case"RR":return 500;case"AR":return 400}return 0},v=()=>{window.location.reload()};return E(async()=>{a.value=!0;try{const d=await O();i.value=d.map(t=>({...t,card1:f(t.card_wanted),card2:f(t.card_to_give)}))}catch(d){l.value=d}a.value=!1}),(d,t)=>(s(),b(N,{style:{padding:"2rem 0"}},{default:A(()=>[a.value?(s(),n("h2",ge,"Loading your proposals…")):l.value?(s(),n(k,{key:1},[e("h2",ke,y(l.value),1),p(M,{onClick:v},{default:A(()=>t[0]||(t[0]=[V("Refresh")])),_:1,__:[0]})],64)):i.value.length>0?(s(),n(k,{key:2},[t[3]||(t[3]=e("h2",null,"You’ve got a match!",-1)),e("div",ye,[(s(!0),n(k,null,C(r.value,(h,g)=>(s(),n("div",{class:"exchange-tile",key:g},[e("span",we,"Friend ID : "+y(P(h.friendID)),1),e("div",be,[(s(!0),n(k,null,C(h.wantedCards,(u,_)=>(s(),n("div",{class:"card-container",key:_},[e("img",{src:`/images/cards/thumbnails/${u.imageName}`,alt:u.label.eng,class:"card-image"},null,8,$e)]))),128))]),t[2]||(t[2]=e("div",{class:"exchange-icon"},null,-1)),e("div",Ce,[(s(!0),n(k,null,C(h.givenCards,(u,_)=>(s(),n("div",{class:"card-container",key:_},[e("img",{src:`/images/cards/thumbnails/${u.imageName}`,alt:u.label.eng,class:"card-image"},null,8,xe),e("span",Ie,y(o(u.id)),1)]))),128))]),e("div",Be,[t[1]||(t[1]=e("img",{src:Y,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",Pe,y(c(h.rarity)),1)])]))),128))])],64)):(s(),n("h2",Se,t[4]||(t[4]=[V(" No matching proposals for now :( "),e("br",null,null,-1),V(" Please come back later! ")])))]),_:1}))}}),Ae=B(Ve,[["__scopeId","data-v-edc26d85"]]),De={key:0,class:"prices"},Fe={class:"rarity"},Re=["src","alt","title"],Me=I({__name:"PacksInformations",setup(w){const i=l=>l.reduce((r,o)=>{for(const f of o.packs||[])r[f||""]=(r[f||""]||0)+o.count;return r},{}),a=x(()=>Object.entries(i(R.value)).sort((l,r)=>r[1]-l[1]));return(l,r)=>Q(R).length>0?(s(),n("div",De,[r[0]||(r[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(s(!0),n(k,null,C(a.value,([o,f])=>(s(),n("div",{class:"price",key:o},[e("div",Fe,[e("img",{src:`/images/packs/${o}.webp`,alt:o,height:"100px",title:o+" booster pack"},null,8,Re)]),e("span",null,y(f)+" cards wanted inside",1)]))),128))])):m("",!0)}}),Ne=B(Me,[["__scopeId","data-v-f29dc244"]]),Ge={class:"aside"},Te={class:"content"},Ue=I({__name:"AccountView",setup(w){const i=X(),a=x(()=>i.name),l=x(()=>["wishlist","offers"].includes(a.value??""));return(r,o)=>(s(),n("main",null,[e("div",Ge,[e("nav",null,[p(S,{label:"Wishlist",icon:"heart",active:a.value==="wishlist"},null,8,["active"]),p(S,{label:"Offers",icon:"portfolio",active:a.value==="offers"},null,8,["active"]),p(S,{label:"Proposals",icon:"exchange",active:a.value==="proposals"},null,8,["active"]),p(S,{label:"Account",icon:"gear",active:a.value==="account"},null,8,["active"])]),l.value?(s(),b(Z,{key:0,id:"prices",showGiving:a.value==="offers"},null,8,["showGiving"])):m("",!0)]),e("div",Te,[l.value?(s(),b(ee,{key:0,step:a.value==="wishlist"?1:2},null,8,["step"])):m("",!0),a.value==="proposals"?(s(),b(Ae,{key:1})):m("",!0),a.value==="account"?(s(),b(N,{key:2,style:{gap:"2rem"}},{default:A(()=>[o[0]||(o[0]=e("h2",null,"Settings",-1)),p(me),p(Ne)]),_:1,__:[0]})):m("",!0)])]))}}),ze=B(Ue,[["__scopeId","data-v-a023504d"]]);export{ze as default};
