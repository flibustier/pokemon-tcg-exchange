import{d as P,g as U,c as a,o as s,n as L,a as e,h as _,t as p,_ as S,i as j,j as z,k as H,r as C,l as W,m as B,p as q,b as m,q as F,v as M,F as k,x as I,w as R,e as D,P as G,y as E,z as O,A as J,B as K,f as x,C as Y,D as Q,E as X,G as N,H as Z,I as ee,J as se,K as te}from"./app-HFvfzIib.js";import{C as T}from"./CenteredLayout-CSjuvvDI.js";const ae="/images/icons/exchange.svg",ne={class:"icon"},oe={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},ie={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},re={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},le={key:3,src:ae,width:"32",height:"32"},de={class:"label"},ce=P({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean}},setup(w){const o=U(),n=w,l=()=>o.push({name:n.label.toLowerCase()});return(i,r)=>(s(),a("button",{class:L(["portfolio-btn",{active:i.active}]),onClick:l},[e("span",ne,[i.icon==="portfolio"?(s(),a("svg",oe,r[0]||(r[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):i.icon==="heart"?(s(),a("svg",ie,r[1]||(r[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):i.icon==="gear"?(s(),a("svg",re,r[2]||(r[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):_("",!0),i.icon==="exchange"?(s(),a("img",le)):_("",!0)]),e("span",de,p(i.label),1)],2))}}),A=S(ce,[["__scopeId","data-v-b8091c95"]]),ue={class:"form-group"},ve={class:"form-group"},_e={class:"form-group"},fe=["src"],he={key:0,class:"icon-list"},me=["onClick"],pe=["src"],ge=P({__name:"SettingsForm",setup(w){const o=j({pseudo:"",icon:"000",...H(),friend_id:z()}),n=C(!1),l=C(!1);W(()=>[o.friend_id,o.pseudo,o.icon],()=>{l.value=!1});const i=B(()=>`/images/avatars/${o.icon||"000"}.png`),r=V=>{o.icon=String(V).padStart(3,"0"),n.value=!1},f=async()=>{E(o),l.value=await O()||!1};return(V,c)=>(s(),a("form",{class:"friend-form",onSubmit:q(f,["prevent"])},[c[6]||(c[6]=e("h2",null,"Settings",-1)),e("div",ue,[c[3]||(c[3]=e("label",{for:"friendId",class:"form-label"},'Friend ID (16 digits without "-")',-1)),F(e("input",{"onUpdate:modelValue":c[0]||(c[0]=v=>o.friend_id=v),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16"},null,512),[[M,o.friend_id]])]),e("div",ve,[c[4]||(c[4]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),F(e("input",{"onUpdate:modelValue":c[1]||(c[1]=v=>o.pseudo=v),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[M,o.pseudo]])]),e("div",_e,[c[5]||(c[5]=e("label",{for:"icon",class:"form-label"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:c[2]||(c[2]=v=>n.value=!n.value)},[e("img",{src:i.value,alt:"Selected Icon",id:"icon"},null,8,fe)]),n.value?(s(),a("div",he,[(s(),a(k,null,I(40,v=>e("div",{key:v,class:"icon-item",onClick:d=>r(v)},[e("img",{src:`/images/avatars/${String(v).padStart(3,"0")}.png`,alt:"Icon"},null,8,pe)],8,me)),64))])):_("",!0)]),m(G,{type:"submit",role:"button",disabled:l.value},{default:R(()=>[D(p(l.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),ke=S(ge,[["__scopeId","data-v-a872bcac"]]),ye={key:0},we={style:{"margin-bottom":"2rem"}},be={class:"list"},$e={class:"tile-title"},xe=["src"],Ce={key:0},Ie={class:"cards"},Be=["src","alt"],Pe={class:"cards"},Se=["src","alt"],Ve={class:"card-count"},Ae={class:"tile-footer"},De={class:"token-count"},Re={key:3},Fe=P({__name:"ProposalsView",setup(w){const o=C([]),n=C(!0),l=C(),i=B(()=>o.value.reduce((d,t)=>{const u=t.card1.rarityCode,{friend_id:g,icon:h,pseudo:b}=t,$=d.find(y=>y.rarity===u&&y.friendID===g);return $?($.wantedCards.every(y=>y.id!==t.card1.id)&&$.wantedCards.push(t.card1),$.givenCards.every(y=>y.id!==t.card2.id)&&$.givenCards.push(t.card2)):d.push({rarity:u,friendID:g,icon:h,pseudo:b,wantedCards:[t.card1],givenCards:[t.card2]}),d},[])),r=d=>Y.value[d]||0,f=d=>{const[t,u]=d.split("-");return{id:d,...X.find(g=>g.set===t&&g.number===parseInt(u))}},V=d=>d.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"),c=d=>{switch(d){case"R":return 120;case"RR":return 500;case"AR":return 400}return 0},v=()=>{window.location.reload()};return J(async()=>{n.value=!0;try{const d=await K();o.value=d.map(t=>({...t,card1:f(t.card_wanted),card2:f(t.card_to_give)}))}catch(d){l.value=d}n.value=!1}),(d,t)=>(s(),x(T,{style:{padding:"2rem 0"}},{default:R(()=>[n.value?(s(),a("h2",ye,"Loading your proposals…")):l.value?(s(),a(k,{key:1},[e("h2",we,p(l.value),1),m(G,{onClick:v},{default:R(()=>t[0]||(t[0]=[D("Refresh")])),_:1,__:[0]})],64)):o.value.length>0?(s(),a(k,{key:2},[t[3]||(t[3]=e("h2",null,"You’ve got a match!",-1)),e("div",be,[(s(!0),a(k,null,I(i.value,(u,g)=>(s(),a("div",{class:"exchange-tile",key:g},[e("div",$e,[u.icon&&u.icon!=="000"?(s(),a("img",{key:0,src:`/images/avatars/${u.icon}.png`,height:"40px",alt:""},null,8,xe)):_("",!0),e("div",null,[u.pseudo?(s(),a("div",Ce,p(u.pseudo),1)):_("",!0),e("div",null,"ID "+p(V(u.friendID)),1)])]),e("div",Ie,[(s(!0),a(k,null,I(u.wantedCards,(h,b)=>(s(),a("div",{class:"card-container",key:b},[e("img",{src:`/images/cards/thumbnails/${h.imageName}`,alt:h.label.eng,class:"card-image"},null,8,Be)]))),128))]),t[2]||(t[2]=e("div",{class:"exchange-icon"},null,-1)),e("div",Pe,[(s(!0),a(k,null,I(u.givenCards,(h,b)=>(s(),a("div",{class:"card-container",key:b},[e("img",{src:`/images/cards/thumbnails/${h.imageName}`,alt:h.label.eng,class:"card-image"},null,8,Se),e("span",Ve,p(r(h.id)),1)]))),128))]),e("div",Ae,[t[1]||(t[1]=e("img",{src:Q,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",De,p(c(u.rarity)),1)])]))),128))])],64)):(s(),a("h2",Re,t[4]||(t[4]=[D(" No matching proposals for now :( "),e("br",null,null,-1),D(" Please come back later! ")])))]),_:1}))}}),Me=S(Fe,[["__scopeId","data-v-e094f3ec"]]),Ne={key:0,class:"prices"},Ge={class:"rarity"},Te=["src","alt","title"],Ue=P({__name:"PacksInformations",setup(w){const o=l=>l.reduce((i,r)=>{for(const f of r.packs||[])i[f||""]=(i[f||""]||0)+r.count;return i},{}),n=B(()=>Object.entries(o(N.value)).sort((l,i)=>i[1]-l[1]));return(l,i)=>Z(N).length>0?(s(),a("div",Ne,[i[0]||(i[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(s(!0),a(k,null,I(n.value,([r,f])=>(s(),a("div",{class:"price",key:r},[e("div",Ge,[e("img",{src:`/images/packs/${r}.webp`,alt:r,height:"100px",title:r+" booster pack"},null,8,Te)]),e("span",null,p(f)+" cards wanted inside",1)]))),128))])):_("",!0)}}),Le=S(Ue,[["__scopeId","data-v-f29dc244"]]),je={class:"aside"},ze={class:"content"},He={class:"row-xl"},We=P({__name:"AccountView",setup(w){const o=ee(),n=B(()=>o.name),l=B(()=>["wishlist","offers"].includes(n.value??""));return(i,r)=>(s(),a("main",null,[e("div",je,[e("nav",null,[m(A,{label:"Wishlist",icon:"heart",active:n.value==="wishlist"},null,8,["active"]),m(A,{label:"Offers",icon:"portfolio",active:n.value==="offers"},null,8,["active"]),m(A,{label:"Proposals",icon:"exchange",active:n.value==="proposals"},null,8,["active"]),m(A,{label:"Account",icon:"gear",active:n.value==="account"},null,8,["active"])]),l.value?(s(),x(se,{key:0,id:"prices",showGiving:n.value==="offers"},null,8,["showGiving"])):_("",!0)]),e("div",ze,[l.value?(s(),x(te,{key:0,step:n.value==="wishlist"?1:2},null,8,["step"])):_("",!0),n.value==="proposals"?(s(),x(Me,{key:1})):_("",!0),n.value==="account"?(s(),x(T,{key:2},{default:R(()=>[e("div",He,[m(ke),m(Le)])]),_:1})):_("",!0)])]))}}),Oe=S(We,[["__scopeId","data-v-d0e23fce"]]);export{Oe as default};
