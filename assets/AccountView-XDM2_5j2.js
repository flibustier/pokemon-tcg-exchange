import{d as R,c as I,a as l,o as a,n as N,b as m,e,f as h,t as b,_ as B,u as X,g as Y,r as w,h as L,w as ne,i as oe,j as se,k as le,l as ve,m as M,p as T,q as $,s as v,F as x,v as P,x as G,y as W,z as me,A as pe,B as fe,C as Z,D as _e,E as K,G as he,H as ye,I as be,J as ke,K as te,L as we,M as $e,N as Ce,O as re,P as Ie,Q as Se,R as Ve,S as ie,T as ue,U as xe}from"./app-C7-HtPzD.js";import{C as J}from"./CenteredLayout-Dprr5S2-.js";import{C as Be,_ as Ae,a as O,P as Re,b as Ue}from"./CardsGrid-CKC8r5xz.js";import{P as Q}from"./PlainButton-BR1wI-SM.js";const de="/images/icons/exchange.svg",De=["src"],Me={key:0};const Te=R({__name:"UserBadge",props:{icon:{},pseudo:{},language:{},friendID:{},withoutBorder:{type:Boolean}},setup(y){const c=I(()=>y.friendID.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4"));return(d,u)=>(a(),l("div",{class:N(["user-badge",{"with-border":!d.withoutBorder}])},[d.icon&&d.icon!=="000"?(a(),l("img",{key:0,src:`/images/avatars/${d.icon}.png`,height:"40px",alt:""},null,8,De)):m("",!0),e("div",null,[d.pseudo?(a(),l("div",Me,[h(b(d.pseudo)+" ",1),(d.language,m("",!0))])):m("",!0),e("div",null,"ID "+b(c.value),1)])],2))}}),ce=B(Te,[["__scopeId","data-v-eb7da61a"]]),Pe={key:1,class:"messenger"},Fe={class:"discussion-list"},Le=["onClick"],Ne=["src"],Ge={key:1,class:"avatar"},He={class:"content"},ze={key:0,class:"name"},Ee={key:0,class:"language"},qe={key:1,class:"name"},Oe={class:"last-message"},je={key:0},We={class:"time"},Ye={class:"chat-header"},Ke={key:0,class:"actions show-mobile"},Je={viewBox:"6 6 24 24",fill:"currentColor",width:"20",height:"20","aria-hidden":"true",style:{"--color":"var(--primary-color)"},overflow:"visible"},Qe={class:"actions"},Xe={class:"chat-messages"},Ze={class:"chat-input"},es=["disabled"],ss=R({__name:"MessagesView",setup(y){const c=X(),d=Y(),u=I(()=>c.params.id),i=w([]),r=w(""),g=w(!1),p=I(()=>L.value.find(n=>n.friend_id===u.value)),_=n=>{const o=new Date,C=new Date(n+" UTC"),t=o.getTime()-C.getTime(),s=Math.floor(t/(1e3*3600*24));return s===0?C.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):s===1?"Yesterday":s<7?C.toLocaleDateString(void 0,{weekday:"long"}):o.getFullYear()===C.getFullYear()?C.toLocaleDateString(void 0,{day:"2-digit",month:"long"}):C.toLocaleDateString(void 0,{day:"2-digit",month:"long",year:"numeric"})},S=n=>{g.value=!1,d.push({name:"message",params:{id:n}})},A=()=>{d.push({name:"proposals",query:{id:u.value}})},U=async()=>{if(r.value.length<1)return;const n=await pe(u.value,r.value);n==="created"?(r.value="",await V()):i.value.push({from:"error",to:u.value,message:n,sent:new Date().toISOString(),read:null})},V=async()=>{u.value&&(i.value=(await fe(u.value)).reverse(),i.value.length===0&&!Z().has_beta_access&&d.push({name:"beta"}),p.value?.read===!1&&await se(),_e(()=>{const n=document.querySelector(".chat-messages");n&&(n.scrollTop=n.scrollHeight)}))};ne(u,V);let k;return oe(async()=>{await se(),!u.value&&L.value.length>0&&S(L.value[0].friend_id),V(),k=setInterval(V,10*1e3)}),le(()=>{clearInterval(k)}),(n,o)=>{const C=ve("router-link");return!u.value&&T(L).length===0?(a(),M(J,{key:0},{default:$(()=>[e("h2",null,[o[3]||(o[3]=h(" You don’t have any conversation yet. ",-1)),o[4]||(o[4]=e("br",null,null,-1)),o[5]||(o[5]=h(" Please use the ",-1)),v(C,{to:"/account/proposals"},{default:$(()=>o[2]||(o[2]=[h("proposals",-1)])),_:1,__:[2]}),o[6]||(o[6]=h(" menu to start a new one. ",-1))])]),_:1})):(a(),l("div",Pe,[T(L).length>0?(a(),l("div",{key:0,class:N(["discussions",{"hidden-mobile":!g.value}])},[m("",!0),e("ul",Fe,[(a(!0),l(x,null,P(T(L),t=>(a(),l("li",{key:t.friend_id,class:N(["discussion-item",{active:t.friend_id===u.value,unread:t.read===!1}]),onClick:s=>S(t.friend_id)},[t.avatar!==""?(a(),l("img",{key:0,src:`/images/avatars/${t.avatar}.png`,class:"avatar",height:"40px",alt:""},null,8,Ne)):(a(),l("div",Ge,b(t.friend_id.slice(-4)),1)),e("div",He,[t.pseudo!==""?(a(),l("div",ze,[h(b(t.pseudo)+" ",1),t.language!==""?(a(),l("span",Ee,"("+b(t.language)+")",1)):m("",!0)])):(a(),l("div",qe,b(t.friend_id),1)),e("div",Oe,[h(b(t.last_message)+" ",1),t.last_message.length===25?(a(),l("span",je,"…")):m("",!0)]),e("div",We,b(_(t.last_message_date)),1)])],10,Le))),128))])],2)):m("",!0),e("div",{class:N(["chat",{"hidden-mobile":g.value}])},[e("div",Ye,[T(L).length>0?(a(),l("div",Ke,[e("button",{title:"List of discussions",onClick:o[0]||(o[0]=t=>g.value=!0)},[(a(),l("svg",Je,o[8]||(o[8]=[e("path",{d:"M17.634 11.384a1.25 1.25 0 0 0-1.768-1.768l-7.5 7.5a1.25 1.25 0 0 0 0 1.768l7.5 7.5a1.25 1.25 0 0 0 1.768-1.768l-4.94-4.94a.25.25 0 0 1 .177-.426H26.75a1.25 1.25 0 1 0 0-2.5H12.871a.25.25 0 0 1-.177-.427l4.94-4.94z"},null,-1)])))])])):m("",!0),v(ce,{icon:p.value?.avatar||T(c).query.i,pseudo:p.value?.pseudo||T(c).query.p,friendID:p.value?.friend_id||u.value||"","without-border":""},null,8,["icon","pseudo","friendID"]),e("div",Qe,[e("button",{title:"Check common proposals",onClick:A},o[9]||(o[9]=[e("img",{src:de,alt:"",height:"28"},null,-1)])),m("",!0)])]),e("div",Xe,[m("",!0),m("",!0),(a(!0),l(x,null,P(i.value,(t,s)=>(a(),l("div",{key:s,class:N(["message",{"message-sent":["me","error"].includes(t.from),"message-error":t.from==="error"}])},[e("p",null,b(t.message),1)],2))),128))]),e("div",Ze,[G(e("input",{type:"text",placeholder:"Write a message...","onUpdate:modelValue":o[1]||(o[1]=t=>r.value=t),onKeypress:me(U,["enter"])},null,544),[[W,r.value]]),e("button",{class:"send",onClick:U,disabled:r.value.length<1},o[12]||(o[12]=[e("svg",{height:"20px",viewBox:"0 0 24 24",width:"20px"},[e("title",null,"Press enter to send"),e("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fill:"var(--active-color)"})],-1)]),8,es)])],2)]))}}}),ts=B(ss,[["__scopeId","data-v-031e6218"]]),ge="/images/icons/message.svg",ae=y=>Array.from(new Set(y.filter(c=>c!=null&&c!==""))),as={key:0},ns={style:{"margin-bottom":"2rem"}},os={class:"list"},ls={class:"cards"},rs=["src","alt"],is={class:"cards"},us=["src","alt"],ds={class:"card-count"},cs={class:"tile-footer"},gs={key:0},vs={class:"token-count"},ms=["onClick"],ps={key:3},fs=R({__name:"ProposalsView",setup(y){const c=X(),d=Y(),u=w(),i=w(!0),r=w([]),g=K({raritySelection:[],languageSelection:[],pseudonymSelection:[]}),p=I(()=>r.value.filter(t=>c.query.id?t.friend_id===c.query.id:!0)),_=I(()=>p.value.map(t=>t.card1)),S=I(()=>ae(p.value.map(t=>t.language))),A=I(()=>ae(p.value.map(t=>t.pseudo))),U=I(()=>p.value.reduce((t,s)=>{const f=s.card1.rarityCode,{friend_id:F,icon:D,pseudo:H,language:ee}=s;if(g.raritySelection.length&&!g.raritySelection.includes(f)||g.languageSelection.length&&!g.languageSelection.includes(ee||"")||g.pseudonymSelection.length&&!g.pseudonymSelection.includes(H||""))return t;const q=t.find(z=>z.rarity===f&&z.friendID===F);return q?(q.wantedCards.every(z=>z.id!==s.card1.id)&&q.wantedCards.push(s.card1),q.givenCards.every(z=>z.id!==s.card2.id)&&q.givenCards.push(s.card2)):t.push({rarity:f,friendID:F,icon:D,pseudo:H,language:ee,wantedCards:[s.card1],givenCards:[s.card2]}),t},[])),V=t=>be.value[t]||0,k=t=>{const[s,f]=t.split("-");return{id:t,...ke.find(F=>F.set===s&&F.number===parseInt(f))}},n=t=>{switch(t){case"R":return 1200;case"RR":return 5e3;case"AR":return 4e3}return 0},o=t=>{d.push({name:"message",params:{id:t.friendID},query:{i:t.icon,p:t.pseudo}})},C=()=>{window.location.reload()};return oe(async()=>{i.value=!0;try{const t=await he();r.value=t.map(s=>({...s,card1:k(s.card_wanted),card2:k(s.card_to_give)}))}catch(t){u.value=t}i.value=!1}),(t,s)=>(a(),M(J,{style:{padding:"2rem 0"}},{default:$(()=>[i.value?(a(),l("h2",as,"Loading your proposals…")):u.value?(a(),l(x,{key:1},[e("h2",ns,b(u.value),1),v(Q,{onClick:C},{default:$(()=>s[1]||(s[1]=[h("Refresh",-1)])),_:1,__:[1]})],64)):p.value.length>0?(a(),l(x,{key:2},[s[5]||(s[5]=e("h2",null,"You’ve got a match!",-1)),v(Be,{modelValue:g,"onUpdate:modelValue":s[0]||(s[0]=f=>g=f),cards:_.value,languages:S.value,pseudonyms:A.value},null,8,["modelValue","cards","languages","pseudonyms"]),e("div",os,[(a(!0),l(x,null,P(U.value,(f,F)=>(a(),l("div",{class:"exchange-tile",key:F},[v(ce,ye({class:"tile-title"},{ref_for:!0},f),null,16),e("div",ls,[(a(!0),l(x,null,P(f.wantedCards,(D,H)=>(a(),l("div",{class:"card-container",key:H},[e("img",{src:`/images/cards/thumbnails/${D.imageName}`,alt:D.label.eng,class:"card-image"},null,8,rs)]))),128))]),s[4]||(s[4]=e("div",{class:"exchange-icon"},null,-1)),e("div",is,[(a(!0),l(x,null,P(f.givenCards,(D,H)=>(a(),l("div",{class:"card-container",key:H},[e("img",{src:`/images/cards/thumbnails/${D.imageName}`,alt:D.label.eng,class:"card-image"},null,8,us),e("span",ds,b(V(D.id)),1)]))),128))]),e("div",cs,[f.language?(a(),l("div",gs,b(f.language),1)):m("",!0),e("div",null,[s[2]||(s[2]=e("img",{src:Ae,alt:"Trade Token",class:"trade-token",height:"32"},null,-1)),e("span",vs,b(n(f.rarity)),1)]),e("div",{class:"clickable",onClick:D=>o(f)},s[3]||(s[3]=[e("img",{src:ge,height:"20",alt:"Message"},null,-1)]),8,ms)])]))),128))])],64)):(a(),l("h2",ps,s[6]||(s[6]=[h(" No matching proposals for now :( ",-1),e("br",null,null,-1),h(" Please come back later! ",-1)])))]),_:1}))}}),_s=B(fs,[["__scopeId","data-v-d509bc51"]]),hs={key:0,class:"prices"},ys={class:"rarity"},bs=["src","alt","title"],ks=R({__name:"PacksInformations",setup(y){const c=u=>u.reduce((i,r)=>{for(const g of r.packs||[])i[g||""]=(i[g||""]||0)+r.count;return i},{}),d=I(()=>Object.entries(c(te.value)).sort((u,i)=>i[1]-u[1]));return(u,i)=>T(te).length>0?(a(),l("div",hs,[i[0]||(i[0]=e("h3",null,"ℹ️ Best packs matching your wishes :",-1)),(a(!0),l(x,null,P(d.value,([r,g])=>(a(),l("div",{class:"price",key:r},[e("div",ys,[e("img",{src:`/images/packs/${r}.webp`,alt:r,height:"100px",title:r+" booster pack"},null,8,bs)]),e("span",null,b(g)+" cards wanted inside",1)]))),128))])):m("",!0)}}),ws=B(ks,[["__scopeId","data-v-f29dc244"]]),$s={class:"toggle-container"},Cs={class:"switch-label"},Is=["disabled"],Ss={class:"switch-text"},Vs=R({__name:"ToggleSwitch",props:we({disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(y){const c=$e(y,"modelValue");return(d,u)=>(a(),l("div",$s,[e("label",Cs,[G(e("input",{type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=i=>c.value=i),disabled:y.disabled,class:"switch-input"},null,8,Is),[[Ce,c.value]]),u[1]||(u[1]=e("span",{class:"switch-slider"},null,-1)),e("span",Ss,[re(d.$slots,"default",{},void 0)])])]))}}),E=B(Vs,[["__scopeId","data-v-c0313374"]]),xs={class:"form-group"},Bs=["src"],As={key:0,class:"icon-list"},Rs=["onClick"],Us=["src"],Ds={class:"form-group"},Ms={class:"form-group"},Ts={class:"form-group"},Ps={class:"form-group"},Fs=["value"],Ls={class:"form-group"},Ns=43,Gs=R({__name:"SettingsForm",setup(y){const c=["ENG","SPA","FRA","GER","ITA","POR","JPN","KOR","CHT"],d=Y(),{rarity_rules:u,...i}=Z(),r=K({pseudo:"",icon:"000",language:"",accept_notifications:!0,has_beta_access:!1,...i,friend_id:Ie()}),g=w(!1),p=w(!1),_=K({C:!0,U:!0,R:!0,RR:!0,AR:!0,...(u||[]).reduce((k,n)=>({...k,[n.rarity]:n.enabled===1}),{})});ne(()=>[r,_],()=>{p.value=!1},{deep:!0});const S=I(()=>`/images/avatars/${r.icon||"000"}.png`),A=k=>{r.icon=String(k).padStart(3,"0"),g.value=!1},U=()=>{d.push({name:"beta"})},V=async()=>{ie({...r,rarity_rules:Object.entries(_).map(([k,n])=>({rarity:k,enabled:n?1:0}))}),p.value=await ue()||!1};return(k,n)=>(a(),l("form",{class:"friend-form",onSubmit:Se(V,["prevent"])},[n[16]||(n[16]=e("h2",null,"Settings",-1)),e("div",xs,[n[9]||(n[9]=e("label",{for:"icon",class:"form-label label-center"},"Profile Icon",-1)),e("div",{class:"selected-icon",onClick:n[0]||(n[0]=o=>g.value=!g.value)},[e("img",{src:S.value,alt:"Selected Icon",id:"icon"},null,8,Bs)]),g.value?(a(),l("div",As,[(a(),l(x,null,P(Ns,o=>e("div",{key:o,class:"icon-item",onClick:C=>A(o)},[e("img",{src:`/images/avatars/${String(o).padStart(3,"0")}.png`,alt:"Icon"},null,8,Us)],8,Rs)),64))])):m("",!0)]),e("div",Ds,[n[10]||(n[10]=e("label",{for:"friendId",class:"form-label"},"Friend ID",-1)),G(e("input",{"onUpdate:modelValue":n[1]||(n[1]=o=>r.friend_id=o),required:"",type:"text",id:"friendId",class:"friend-id",placeholder:"0000000000000000",pattern:"\\d{16}",maxlength:"16",disabled:!0},null,512),[[W,r.friend_id]])]),e("div",Ms,[n[11]||(n[11]=e("label",{for:"pseudo",class:"form-label"},"Pseudonym (14 characters max)",-1)),G(e("input",{"onUpdate:modelValue":n[2]||(n[2]=o=>r.pseudo=o),type:"text",id:"pseudo",class:"friend-id",maxlength:"14"},null,512),[[W,r.pseudo]])]),e("div",Ts,[n[12]||(n[12]=e("label",{class:"form-label"},"Accept exchange of rarity:",-1)),v(E,{modelValue:_.C,"onUpdate:modelValue":n[3]||(n[3]=o=>_.C=o)},{default:$(()=>[v(O,{rarity:"C"})]),_:1},8,["modelValue"]),v(E,{modelValue:_.U,"onUpdate:modelValue":n[4]||(n[4]=o=>_.U=o)},{default:$(()=>[v(O,{rarity:"U"})]),_:1},8,["modelValue"]),v(E,{modelValue:_.R,"onUpdate:modelValue":n[5]||(n[5]=o=>_.R=o)},{default:$(()=>[v(O,{rarity:"R"})]),_:1},8,["modelValue"]),v(E,{modelValue:_.RR,"onUpdate:modelValue":n[6]||(n[6]=o=>_.RR=o)},{default:$(()=>[v(O,{rarity:"RR"})]),_:1},8,["modelValue"]),v(E,{modelValue:_.AR,"onUpdate:modelValue":n[7]||(n[7]=o=>_.AR=o)},{default:$(()=>[v(O,{rarity:"AR"})]),_:1},8,["modelValue"])]),e("div",Ps,[n[14]||(n[14]=e("label",{for:"language-input",class:"form-label"},"Your card’s language",-1)),G(e("select",{id:"language-input","onUpdate:modelValue":n[8]||(n[8]=o=>r.language=o),class:"language-input"},[n[13]||(n[13]=e("option",{value:""},"Please select",-1)),(a(),l(x,null,P(c,o=>e("option",{key:o,value:o},b(o),9,Fs)),64))],512),[[Ve,r.language]])]),e("div",Ls,[v(E,{"model-value":r.has_beta_access,disabled:r.has_beta_access,"onUpdate:modelValue":U},{default:$(()=>n[15]||(n[15]=[h(" Access beta features (messages, …) ",-1)])),_:1,__:[15]},8,["model-value","disabled"])]),v(Q,{type:"submit",role:"button",disabled:p.value},{default:$(()=>[h(b(p.value?"Saved!":"Save"),1)]),_:1},8,["disabled"])],32))}}),Hs=B(Gs,[["__scopeId","data-v-12e03221"]]),zs=["disabled"],Es={class:"icon"},qs={key:0,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},Os={key:1,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},js={key:2,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#3b4252","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Ws={key:3,src:de,width:"32",height:"32"},Ys={key:4,src:ge,width:"38",height:"38"},Ks={class:"label"},Js=R({__name:"MenuButton",props:{label:{},icon:{},active:{type:Boolean},disabled:{type:Boolean},withNotificationDot:{type:Boolean}},setup(y){const c=Y(),d=y,u=()=>c.push({name:d.label.toLowerCase()});return(i,r)=>(a(),l("button",{class:N(["portfolio-btn",{active:i.active}]),disabled:i.disabled??!1,onClick:u},[i.icon==="message"?(a(),l("span",{key:0,class:N({"notification-dot":i.withNotificationDot})},null,2)):m("",!0),e("span",Es,[i.icon==="portfolio"?(a(),l("svg",qs,r[0]||(r[0]=[e("rect",{x:"6",y:"6",width:"14",height:"20",rx:"2",stroke:"#444","stroke-width":"2",fill:"#fff"},null,-1),e("rect",{x:"10",y:"12",width:"6",height:"6",rx:"1",stroke:"#444","stroke-width":"1.5",fill:"#fff"},null,-1),e("rect",{x:"8",y:"8",width:"14",height:"20",rx:"2",stroke:"#bbb","stroke-width":"1"},null,-1)]))):i.icon==="heart"?(a(),l("svg",Os,r[1]||(r[1]=[e("path",{d:"M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"},null,-1)]))):i.icon==="gear"?(a(),l("svg",js,r[2]||(r[2]=[e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1)]))):m("",!0),i.icon==="exchange"?(a(),l("img",Ws)):m("",!0),i.icon==="message"?(a(),l("img",Ys)):m("",!0)]),e("span",Ks,b(i.label),1)],10,zs))}}),j=B(Js,[["__scopeId","data-v-c300ebbe"]]),Qs="/images/icons/grid.svg",Xs={},Zs={class:"hr-or"};function et(y,c){return a(),l("div",Zs,[re(y.$slots,"default",{},()=>[c[0]||(c[0]=h("OR",-1))])])}const st=B(Xs,[["render",et],["__scopeId","data-v-e7568407"]]),tt={key:0,class:"column-center"},at={class:"form-group"},nt={key:0,class:"form-error"},ot={class:"form-group"},lt={key:0,class:"form-error"},rt=5e3,it=!0,ut=R({__name:"GitHubStargazer",emits:["success"],setup(y,{emit:c}){const d=c,u=w(!1),i=w(!1),r=w(""),g=w(""),p=w([]),_=w(12),S=w(0),A=K({accessCode:!1,ghUsername:!1}),U=async()=>(await(await fetch("https://api.github.com/repos/flibustier/pokemon-tcg-exchange/stargazers")).json()).map(f=>f.login),V=I(()=>g.value.toUpperCase()==="FRIEND"),k=async()=>{if(p.value.includes(r.value)||V.value||_.value<=0){console.log("ACCESS GRANTED"),d("success",V.value?"":r.value);return}if(r.value.length>0&&!u.value&&S.value>0){i.value=!0;return}A.ghUsername=r.value.length>0,A.accessCode=g.value.length>0},n=()=>{i.value=!1},o=async()=>{const t=await U();i.value&&it&&_.value--,!(t.length===p.value.length&&_.value>0)&&(r.value===""&&(r.value=t.find(s=>!p.value.includes(s))||""),u.value=!0,p.value=t,clearInterval(S.value),k())},C=async()=>{p.value=await U(),S.value=setInterval(o,rt)};return le(()=>{clearInterval(S.value)}),(t,s)=>i.value?(a(),l("div",tt,[s[3]||(s[3]=e("img",{src:Qs,alt:"",height:"40"},null,-1)),s[4]||(s[4]=e("p",null,"Checking GitHub Stargazers, please wait… (this could take up to one minute)",-1)),v(Q,{type:"button",role:"button",onClick:n},{default:$(()=>s[2]||(s[2]=[h(" Cancel ",-1)])),_:1,__:[2]})])):(a(),l(x,{key:1},[s[10]||(s[10]=e("p",null," In order to access to the messaging feature and others beta features, you need to star the repository on GitHub : ",-1)),e("span",{class:"github-btn-large",onClick:C},s[5]||(s[5]=[e("a",{class:"gh-btn",href:"https://github.com/flibustier/pokemon-tcg-exchange",rel:"noopener noreferrer",target:"_blank","aria-label":"Star pokemon-tcg-exchange on GitHub"},[e("span",{class:"gh-ico","aria-hidden":"true"}),e("span",{class:"gh-text"},"Star")],-1)])),e("div",at,[s[7]||(s[7]=e("label",{for:"username",class:"form-label"},"Enter your GitHub username :",-1)),G(e("input",{"onUpdate:modelValue":s[0]||(s[0]=f=>r.value=f),type:"text",id:"username",class:"form-input"},null,512),[[W,r.value]]),A.ghUsername&&r.value.length>0?(a(),l("p",nt,s[6]||(s[6]=[h(" This username doesn’t seems to be a new stargazer, please retry in a few seconds or contact us at ",-1),e("a",{href:"mailto:help@pokemon-tcg.exchange?subject=Beta%20Access"},"help@pokemon-tcg.exchange",-1)]))):m("",!0)]),v(st),s[11]||(s[11]=e("p",null,[h(" If you got a code given by our team, you can enter it here ("),e("b",null,"you don’t need it if you have a GitHub account"),h(") : ")],-1)),e("div",ot,[s[8]||(s[8]=e("label",{for:"accessCode",class:"form-label"},"Beta Access code",-1)),G(e("input",{"onUpdate:modelValue":s[1]||(s[1]=f=>g.value=f),type:"text",id:"accessCode",class:"form-input",autocapitalize:"characters"},null,512),[[W,g.value]]),A.accessCode?(a(),l("p",lt," This code is not recognized. Please try again. ")):m("",!0)]),v(Q,{type:"submit",role:"button",disabled:r.value.length<1&&g.value.length<3,onClick:k},{default:$(()=>s[9]||(s[9]=[h(" Submit ",-1)])),_:1,__:[9]},8,["disabled"])],64))}}),dt=B(ut,[["__scopeId","data-v-a3745c42"]]),ct={class:"form"},gt=R({__name:"BetaAccessForm",setup(y){const c=Y(),d=async u=>{ie({...Z(),has_beta_access:!0,github_username:u}),await ue(),c.back()};return(u,i)=>(a(),l("div",ct,[i[0]||(i[0]=e("h2",null,"Access to Beta features",-1)),v(dt,{onSuccess:d})]))}}),vt=B(gt,[["__scopeId","data-v-a0aaca68"]]),mt={class:"aside"},pt={class:"content"},ft={class:"row-xl"},_t=R({__name:"AccountView",setup(y){const c=X(),d=I(()=>c.name),u=I(()=>["wishlist","offers"].includes(d.value??""));return(i,r)=>(a(),l("main",null,[e("div",mt,[e("nav",null,[v(j,{label:"Wishlist",icon:"heart",active:d.value==="wishlist"},null,8,["active"]),v(j,{label:"Offers",icon:"portfolio",active:d.value==="offers"},null,8,["active"]),v(j,{label:"Proposals",icon:"exchange",active:d.value==="proposals"},null,8,["active"]),v(j,{label:"Messages",icon:"message",active:d.value.startsWith("message"),"with-notification-dot":T(xe)},null,8,["active","with-notification-dot"]),v(j,{label:"Account",icon:"gear",active:d.value==="account"},null,8,["active"])]),u.value?(a(),M(Re,{key:0,id:"prices",showGiving:d.value==="offers"},null,8,["showGiving"])):m("",!0)]),e("div",pt,[u.value?(a(),M(Ue,{key:0,step:d.value==="wishlist"?1:2},null,8,["step"])):m("",!0),d.value==="proposals"?(a(),M(_s,{key:1})):m("",!0),d.value==="account"?(a(),M(J,{key:2},{default:$(()=>[e("div",ft,[v(Hs),v(ws)])]),_:1})):m("",!0),d.value==="beta"?(a(),M(J,{key:3},{default:$(()=>[v(vt)]),_:1})):m("",!0),d.value.startsWith("message")?(a(),M(ts,{key:4})):m("",!0)])]))}}),wt=B(_t,[["__scopeId","data-v-4f0f1e38"]]);export{wt as default};
